import{A as T,a as V}from"./AppContent-cce5b469.js";import{y,r as u,o as l,c as g,d as c,w as F,k as p,z as S,b as a,A as b,F as h,f as _,t as d,v as R,e as M,p as x,g as C,x as m,_ as P,B as f,q as v,u as j}from"./index-b0fda7e0.js";import{B as D}from"./Breadcrumb-04c02c70.js";import{u as L}from"./index-a5c741d6.js";const A=y("year",{state:()=>({currentYear:""}),persist:{storage:sessionStorage}}),B=y("rating",{state:()=>({currentRating:""}),persist:{storage:sessionStorage}}),k=t=>(x("data-v-945fbb8b"),t=t(),C(),t),O={class:"search"},U=k(()=>a("option",{value:""},"Filter by year",-1)),G=["value"],z=k(()=>a("option",{value:""},"Filter by rating",-1)),q=["value"];function E(t,e,r,w,s,i){const n=u("a-button");return l(),g("div",O,[c(n,{onClick:r.sort},{default:F(()=>[M("Reverse")]),_:1},8,["onClick"]),p(a("input",{class:"search__input",ref:"inputRef",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>s.text=o),onInput:e[1]||(e[1]=o=>r.searchReview(s.text)),placeholder:"Search by title..."},null,544),[[S,s.text]]),p(a("select",{class:"search__select",ref:"selectRef","onUpdate:modelValue":e[2]||(e[2]=o=>s.year=o),name:"select",onChange:e[3]||(e[3]=o=>r.filterByYear(s.year,s.rating))},[U,(l(!0),g(h,null,_(r.years,o=>(l(),g("option",{value:o},d(o),9,G))),256))],544),[[b,s.year]]),p(a("select",{class:"search__select_rating","onUpdate:modelValue":e[4]||(e[4]=o=>s.rating=o),name:"select_rating",onChange:e[5]||(e[5]=o=>r.filterByRating(s.rating,s.year))},[z,(l(!0),g(h,null,_(s.ratings,o=>(l(),g("option",{value:o},d(o),9,q))),256))],544),[[b,s.rating],[R,r.type=="review"]])])}const H={name:"AppFilter",props:["filterByYear","searchReview","filterByRating","type","years","sort"],data(){return{text:"",year:"",rating:"",ratings:[10,9,8,7,6,5,4,3,2,1,0,"NOT GOOD","NOT BAD","CLASSIC","-"]}},computed:{...m(A,B)},mounted(){this.year=this.yearStore.currentYear,this.rating=this.ratingStore.currentRating,this.type!="review"&&(this.ratingStore.currentRating=""),this.yearStore.$subscribe((t,e)=>{this.year=e.currentYear}),this.ratingStore.$subscribe((t,e)=>{this.rating=e.currentRating})}},Q=P(H,[["render",E],["__scopeId","data-v-945fbb8b"]]),Y=y("page",{state:()=>({currentPage:1}),persist:{storage:sessionStorage}}),J=t=>(x("data-v-adc4306c"),t=t(),C(),t),K={class:"pagination"},W={class:"pagination__header"},X={key:0},Z=["onClick"],$={key:0},ee={class:"pagination__footer"},te={class:"gotoPage"},re=J(()=>a("span",null,"Go to page",-1));function se(t,e,r,w,s,i){return l(),g("div",K,[a("div",W,[a("div",{class:f({"arrow left":!0,disabled:s.page==1}),onClick:e[0]||(e[0]=(...n)=>i.prev&&i.prev(...n))},null,2),r.totalPages>i.displayedPages[i.displayedPages.length-2]&&i.firstPage>1?(l(),g(h,{key:0},[a("div",{class:"item",onClick:e[1]||(e[1]=n=>i.setIndex(1))},d(1)),i.firstPage>2?(l(),g("div",X,"...")):v("",!0)],64)):v("",!0),(l(!0),g(h,null,_(i.displayedPages,n=>(l(),g("div",{key:`pagination-item-${n}`,class:f({item:!0,on:s.page==n}),onClick:o=>i.setIndex(n)},d(n),11,Z))),128)),r.totalPages>i.displayedPages[i.displayedPages.length-1]?(l(),g(h,{key:1},[i.lastPage<r.totalPages-1?(l(),g("div",$,"...")):v("",!0),a("div",{class:"item",onClick:e[2]||(e[2]=n=>i.setIndex(r.totalPages))},d(r.totalPages),1)],64)):v("",!0),a("div",{class:f({"arrow right":!0,disabled:s.page==r.totalPages}),onClick:e[3]||(e[3]=(...n)=>i.next&&i.next(...n))},null,2)]),a("div",ee,[a("div",te,[re,p(a("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=n=>s.gotoNumber=n)},null,512),[[S,s.gotoNumber]]),a("button",{onClick:e[5]||(e[5]=n=>i.gotopage(Number(s.gotoNumber)))},"Go")])])])}const ie={name:"AppPagination",props:["reviews","totalPages"],data(){return{page:1,maxVisibleButtons:8,gotoNumber:""}},computed:{...m(Y),firstPage(){return Math.max(this.page-(this.page===this.totalPages?2:1),1)},lastPage(){return Math.min(this.page+(this.page===1?2:1),this.totalPages)},displayedPages(){return this.totalPages<=this.maxVisibleButtons||this.page>this.totalPages?this.totalPages:Array.from({length:this.lastPage-this.firstPage+1},(t,e)=>e+this.firstPage)}},methods:{prev(){this.pageStore.currentPage=Math.max(this.page-1,1)},next(){this.pageStore.currentPage=Math.min(this.page+1,this.totalPages)},setIndex(t){this.pageStore.currentPage=t},gotopage(t){this.gotoNumber="",!(isNaN(t)||t<1||t>this.totalPages)&&this.setIndex(t)}},created(){this.page=this.pageStore.currentPage,this.pageStore.$subscribe((t,e)=>{this.page=e.currentPage})}},ae=P(ie,[["render",se],["__scopeId","data-v-adc4306c"]]),ne={class:"reviews"},oe={class:"reviews__left"},le={class:"reviews__right"};function ge(t,e,r,w,s,i){const n=u("Breadcrumb"),o=u("AppContent"),N=u("AppPagination"),I=u("AppFilter");return l(),g(h,null,[c(n,{class:"breadcrumb",arr:s.breadcrumbArr,title:r.title},null,8,["arr","title"]),a("main",ne,[a("section",oe,[c(o,{arr:i.paginatedData,contentCount:s.reviews.length},null,8,["arr","contentCount"]),p(c(N,{reviews:s.reviews,totalPages:s.totalPages},null,8,["reviews","totalPages"]),[[R,s.reviews.length]])]),a("aside",le,[c(I,{ref:"childRef",filterByYear:i.filterByYear,searchReview:i.searchReview,sort:i.sort,filterByRating:i.filterByRating,type:r.type,years:r.years},null,8,["filterByYear","searchReview","sort","filterByRating","type","years"])])])],64)}const he={name:"AppVideos",props:["type","years","title"],inject:["json"],components:{AppContent:T,AppFilter:Q,AppPreloader:V,AppPagination:ae,Breadcrumb:D},data(){return{firstChannel:this.json.filter(t=>t.type==this.type),reviews:[],page:1,perPage:20,totalPages:1,gotoNumber:"",isLargeScreen:L("(min-width: 1024px)"),thumbnail:j,breadcrumbArr:[{title:"Home",link:"/"}]}},computed:{paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},...m(Y,A,B)},methods:{sort(){this.reviews=this.reviews.reverse()},setTotalPages(){this.totalPages=Math.ceil(this.reviews.length/this.perPage)},filterByYear(t,e){this.reviews=this.json.filter(r=>r.type==this.type),this.pageStore.currentPage=1,this.$refs.childRef.$refs.inputRef.value="",this.yearStore.currentYear=t,t!=""&&(this.reviews=this.reviews.filter(r=>r.year==t)),this.type=="review"&&e!=""&&(this.reviews=this.reviews.filter(r=>r.rating==e)),this.setTotalPages()},filterByRating(t,e){if(this.reviews=this.json.filter(r=>r.type==this.type),this.pageStore.currentPage=1,this.$refs.childRef.$refs.inputRef.value="",e!==""&&(this.reviews=this.reviews.filter(r=>r.year==e)),this.ratingStore.currentRating=t,t===""){this.setTotalPages();return}this.reviews=this.reviews.filter(r=>r.rating==t),this.setTotalPages()},searchReview(t){if(this.reviews=this.json.filter(e=>e.type==this.type),this.pageStore.currentPage=1,this.yearStore.currentYear="",this.$refs.childRef.$refs.selectRef.value="",this.ratingStore.currentRating="",t.length==0){this.setTotalPages();return}this.reviews=this.reviews.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())),this.setTotalPages()},checkYears(){this.years.includes(Number(this.yearStore.currentYear))||(this.yearStore.currentYear="")}},created(){this.reviews=this.firstChannel,this.perPage=this.isLargeScreen?20:6,this.checkYears(),this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(e=>e.year==+this.yearStore.currentYear)),this.totalPages=Math.ceil(this.reviews.length/this.perPage),this.pageStore.currentPage=this.pageStore.currentPage>this.totalPages?1:this.pageStore.currentPage,this.page=this.pageStore.currentPage,this.pageStore.$subscribe((e,r)=>{this.page=r.currentPage});let t=[];this.reviews.map(e=>{let r={};r.albumTitle=e.albumTitle,r.artistName=e.artistName,r.theneedledrop=e.rating,r.pitchfork="",t.push(r)}),console.log(t)},mounted(){this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(t=>t.year==this.yearStore.currentYear)),this.ratingStore.currentRating!=""&&(this.reviews=this.reviews.filter(t=>t.rating==this.ratingStore.currentRating)),this.setTotalPages()}},ve=P(he,[["render",ge],["__scopeId","data-v-ed2ffcd9"]]);export{ve as A,ae as a,Y as u};
