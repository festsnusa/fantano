import{g as L,A as j,B as S}from"./helper-ee67cbe5.js";import{o as p,c as m,a as U,_ as w,r as _,b as a,t as v,d as i,w as f,F as g,e as $,f as k,g as x,h as I,v as y,j as B,p as C,i as R}from"./index-18dc3d86.js";import{A}from"./AppPreloader-88bb5c3a.js";const E="/assets/vk-b764f8fc.png",H={class:"footer"},T=U('<ul class="list" data-v-0f2d1c87><a href="https://vk.com/mbdtfisstill6" target="_blank" data-v-0f2d1c87><li class="item" data-v-0f2d1c87><img class="image" src="'+E+'" data-v-0f2d1c87></li></a></ul><p class="text" data-v-0f2d1c87>Copyright Â© 2023 The Needle Drop</p>',2),N=[T];function V(e,c,s,o,t,r){return p(),m("footer",H,N)}const W={name:"AppFooter"},F=w(W,[["render",V],["__scopeId","data-v-0f2d1c87"]]),M={class:"header"},q={class:"header__title"},D={class:"content"},K=["src","alt","onLoad"],P={class:"content__title"};function z(e,c,s,o,t,r){const l=_("a-button"),d=_("RouterLink"),u=_("AppPreloader");return p(),m(g,null,[a("div",M,[a("h2",q,v(s.title),1),i(d,{to:`/${s.link}`},{default:f(()=>[i(l,{type:"dashed"},{default:f(()=>[I("Show all")]),_:1})]),_:1},8,["to"])]),a("div",D,[(p(!0),m(g,null,$(s.arr,(n,h)=>k((p(),x(d,{class:"content__element",to:`/videos/${n.id}`},{default:f(()=>[k(i(u,null,null,512),[[y,!n.imageShow]]),k(a("img",{class:"content__image",src:t.thumbnail(n.video),alt:n.title,onLoad:b=>n.imageShow=!0},null,40,K),[[y,n.imageShow]]),a("p",P,v(n.title),1)]),_:2},1032,["to"])),[[y,h<5]])),256))])],64)}const Q={name:"HomeBlock",props:["title","link","arr"],components:{AppPreloader:A},data(){return{thumbnail:L}}},O=w(Q,[["render",z],["__scopeId","data-v-3980dcbf"]]),G=["src"],Y={class:"carousel__left"},Z=["src"],X={class:"carousel__right"},J={class:"carousel__links"},ee=["href"];function te(e,c,s,o,t,r){const l=_("RouterLink"),d=_("a-button"),u=_("a-carousel");return p(),x(u,{arrows:"","dots-class":"slick-dots slick-thumb"},{customPaging:f(n=>[a("a",null,[a("img",{src:r.getImgUrl(n.i)},null,8,G)])]),default:f(()=>[(p(!0),m(g,null,$(t.reviews,n=>(p(),m("div",{class:"carousel",key:n.id},[a("div",Y,[a("img",{src:n.image},null,8,Z)]),a("div",X,[i(l,{to:`/videos/${n.id}`},{default:f(()=>[a("h1",null,v(n.title),1)]),_:2},1032,["to"]),(p(!0),m(g,null,$(n.externalLinks,h=>(p(),m("div",J,[a("a",{href:h.source,target:"_blank"},[i(d,null,{default:f(()=>[I(v(h.title),1)]),_:2},1024)],8,ee)]))),256))])]))),128))]),_:1})}const oe={name:"CarouselApp",data(){return{reviews:B.sort(()=>.5-Math.random()).filter(e=>e.type==="review").slice(0,10)}},methods:{getImgUrl(e){return this.reviews[e].image}}},se=w(oe,[["render",te],["__scopeId","data-v-ae566de5"]]),ne=e=>(C("data-v-3f596be9"),e=e(),R(),e),re={class:"reviews"},ae={class:"wtr"},ce={class:"ynr"},le=ne(()=>a("div",{class:"list-week"},null,-1));function ie(e,c,s,o,t,r){const l=_("AppHeader"),d=_("Breadcrumb"),u=_("HomeBlock"),n=_("AppFooter"),h=_("a-back-top");return p(),m(g,null,[i(l),i(d,{class:"breadcrumb",title:"Home"}),a("main",null,[a("div",re,[i(u,{title:"REVIEWS",link:"videos",arr:t.reviews},null,8,["arr"])]),a("div",ae,[i(u,{title:"WTRs",link:"wtr",arr:t.wtr},null,8,["arr"])]),a("div",ce,[i(u,{title:"YUNOREVIEWS",link:"ynr",arr:t.ynr},null,8,["arr"])]),le]),i(n),i(h)],64)}const de={name:"HomeView",components:{AppHeader:j,Breadcrumb:S,AppFooter:F,HomeBlock:O,AppPreloader:A,Carousel:se},inject:["json"],data(){return{reviews:this.json.filter(e=>e.type=="review").slice(0,5),wtr:this.json.filter(e=>e.type=="weekly").slice(0,5),ynr:this.json.filter(e=>e.type=="YUNOREVIEW").slice(0,5)}},methods:{async fetchLastFm(e,c,s){fetch(`http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=9be755d7287c977402ce830fc6b09896&artist=${encodeURIComponent(c)}&album=${encodeURIComponent(s)}&format=json`).then(t=>t.json()).catch(t=>(console.error("Error:",t),"")).then(t=>{let l=t.album.image;return l[l.length-1]["#text"]}).catch(t=>(console.error("Error:",t),""))},async fetchLastFmImages(e,c,s){await fetch(`http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=e44382d410187390db28095da14f7f98&artist=${encodeURIComponent(c)}&album=${encodeURIComponent(s)}&format=json`).then(t=>t.json()).then(t=>{let l=t.album.image,d=l[l.length-1];console.log(e,d["#text"])})},splitMarkdownParagraphs(e){const c=e.split(/\n\s*\n|\n/);let s=[];return c.forEach(o=>{let t=o.split(" / "),r={};r.id=t[0],r.tags=t[1],s.push(r)}),s},getSpotifyLink(e,c,s){const o="BQBAspwrTtcoSz8Q3eFdU0bWP-ayX-TuV-sMLh-baVdxzFO5iwIB_DLrrFvuF6qg-LRLjXUDmgSCEtqSGbVLepJY9xi7ie6WHZ8-4nxoZzYb1PeL3I7Zwr6DLI0Q7QeN-UPyj3ga2vYgbtDnOp4UzVH56Sh6v2ahvgC-qu0CwANaG5t065zeovXlBNbgTkOiDqQiM61h1wjAmL5TC7_IivBMZx3ihbAYphU5cZikq_Kjvn6bZiWgQ2Gj3Sip9tiKE9U-GBrqAkoWRiDvHINlu6Bw",t=`album:${encodeURIComponent(c)} artist:${encodeURIComponent(s)}`;fetch(`https://api.spotify.com/v1/search?q=${t}&type=album`,{headers:{Authorization:`Bearer ${o}`}}).then(r=>r.json()).then(r=>{const l=r.albums.items;if(l.length>0){const u=l[0].external_urls.spotify;console.log(e,u)}else console.log("No album found with the specified title and artist")}).catch(r=>{console.error("Error retrieving album:",r)})},getAppleMusicLink(){this.json.forEach(e=>{if(e.type!=="review"||e.externalLinks.length>1)return;const c=`${e.albumTitle} ${e.artistName}`,s=`https://itunes.apple.com/search?term=${encodeURIComponent(c)}&entity=album&limit=1`;fetch(s).then(o=>o.json()).then(o=>{if(o.results&&o.results.length>0){const r=o.results[0].collectionViewUrl;console.log(e.id,r)}else return null}).catch(o=>(console.error("Error:",o),null))})},pushAppleMusicLink(){console.log(this.json)},pushImages(){console.log(this.json)},async getMediaLinks(e,c,s){try{const o=`site:music.apple.com ${c} ${s}`,t=`https://www.google.com/search?q=${encodeURIComponent(o)}`,l=await(await fetch(t,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Safari/537.36"}})).text(),n=new DOMParser().parseFromString(l,"text/html").querySelectorAll("div.g");if(!n.length)return[];const b=n[0].querySelector("a").href;b&&b.includes("apple")&&console.log(e,b)}catch(o){return console.error("Error:",o.message),[]}},async fetchData(e){const s=await(await fetch(e,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Safari/537.36"}})).text(),o=window.open();o.document.open(),o.document.write(s),o.document.close(),console.log(o.document.documentElement.textContent)}},async created(){}},me=w(de,[["render",ie],["__scopeId","data-v-3f596be9"]]);export{me as default};
