import{B as E,A as N}from"./Breadcrumb-a5cb7e17.js";import{_ as h,o as i,c,b as a,n as z,r as l,d as _,g as B,h as M,i as y,v as g,F as v,j as w,w as x,e as $,t as k,k as b,l as P,m as j,q as V}from"./index-8c61d7de.js";import{u as S}from"./index-dd7faccf.js";const A={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},C={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:t=>["horizontal","vertical","both","none"].includes(t)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return A[this.type]||A.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},H=["width","height","viewBox"],K=["d"];function U(t,e,n,p,r,o){return i(),c("svg",{width:o.sizeValue,height:o.sizeValue,viewBox:o.viewboxValue,style:z(o.styles)},[a("path",{d:n.path},null,8,K)],12,H)}const Y=h(C,[["render",U],["__scopeId","data-v-76aa6b74"]]);var F="M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z";const W={class:"stars"};function q(t,e,n,p,r,o){const s=l("SvgIcon");return i(),c("div",W,[_(s,{type:"mdi",path:r.path},null,8,["path"])])}const O={name:"ReviewStar",components:{SvgIcon:Y},data(){return{path:F}}},D=h(O,[["render",q],["__scopeId","data-v-cd040290"]]),Q={name:"AppToggle",props:["toggleValue","checked"],data(){return{checkedFlag:this.checked}}};function Z(t,e,n,p,r,o){const s=l("a-switch");return i(),c("div",null,[_(s,{checked:r.checkedFlag,"onUpdate:checked":e[0]||(e[0]=u=>r.checkedFlag=u),"checked-children":"EN","un-checked-children":"RU",onChange:e[1]||(e[1]=u=>n.toggleValue(r.checkedFlag))},null,8,["checked"])])}const G=h(Q,[["render",Z]]),J={name:"VKPlaylist",props:{playlistUrl:{type:String,required:!0},width:{type:Number,default:300},height:{type:Number,default:400}},setup(t){const e=B(!1),n=s=>{const u=/\/music\/playlist\/(-?\d+)_(\w+)/,d=/\/music\/album\/(-?\d+)_(\d+)_(\w+)/,m=s.match(u),f=s.match(d);return m&&m.length===3?{ownerId:m[1],playlistId:m[2]}:f&&f.length===4?{ownerId:f[1],playlistId:`${f[2]}_${f[3]}`}:{ownerId:null,playlistId:null}},{ownerId:p,playlistId:r}=n(t.playlistUrl);M(()=>{if(e.value)o();else{const s=document.createElement("script");s.src="https://vk.com/js/api/openapi.js?168",s.async=!0,s.defer=!0,document.head.appendChild(s),s.onload=()=>{e.value=!0,o()}}});const o=s=>{VK.Widgets.Playlist("vkPlaylist",p,r,t.width,t.height,{mode:4})};return{embedPlaylist:o}}},X={id:"vkPlaylist",ref:"vkPlaylist"};function ee(t,e,n,p,r,o){return i(),c("div",X,null,512)}const te=h(J,[["render",ee]]),ne={class:"video"},re=["src"],se={class:"external-links"},ie=["onClick"],oe={class:"player"},le=["src"];function ce(t,e,n,p,r,o){const s=l("a-button"),u=l("VKPlaylist");return i(),c(v,null,[a("div",ne,[a("iframe",{src:r.video(n.current.video),rel:"0",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,re)]),y(a("ul",se,[(i(!0),c(v,null,w(n.current.externalLinks,d=>(i(),c("li",{onClick:m=>o.changePlayer(d.title)},[_(s,null,{default:x(()=>[$(k(d.title),1)]),_:2},1024)],8,ie))),256))],512),[[g,n.current.externalLinks]]),y(a("div",oe,[(i(!0),c(v,null,w(n.current.externalLinks,d=>(i(),c("div",null,[d.title==="VK"?(i(),b(u,{key:0,playlistUrl:d.source},null,8,["playlistUrl"])):y((i(),c("iframe",{key:1,class:"iframe",style:{"border-radius":"12px"},src:o.toEmbedLink,width:"100%",height:"452",frameBorder:"0",allowfullscreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"},null,8,le)),[[g,r.player==d.title]])]))),256))],512),[[g,n.current.externalLinks]])],64)}const ae={name:"VideoSideSection",props:["current"],components:{VKPlaylist:te},data(){var t;return{video:P,player:(t=this.current.externalLinks)!=null&&t.length?this.current.externalLinks[0].title:"spotify"}},computed:{toEmbedLink(){if(this.player==="spotify"){let t=this.current.externalLinks.find(e=>e.title=="spotify");return t==null?"":t.source.replace("/album/","/embed/album/")}else if(this.player==="AM"){let t=this.current.externalLinks.find(e=>e.title=="AM");return t==null?"":t.source.replace("music.apple.com","embed.music.apple.com")}else{let t=this.current.externalLinks.find(e=>e.title==this.player);return t==null?"":t.source}}},methods:{changePlayer(t){this.player=t}}},T=h(ae,[["render",ce],["__scopeId","data-v-49ea3526"]]);function ue(t,e,n,p,r,o){const s=l("VideoSideSection"),u=l("a-affix");return i(),b(u,{"offset-top":r.top},{default:x(()=>[_(s,{current:n.current,transformYouTubeLink:n.transformYouTubeLink},null,8,["current","transformYouTubeLink"])]),_:1},8,["offset-top"])}const de={name:"AppAffix",props:["current","transformYouTubeLink"],components:{VideoSideSection:T},data(){return{top:20}}},_e=h(de,[["render",ue]]),pe={class:"review"},he={class:"review__right"},me={class:"review__header"},fe={class:"review__title"},ve={class:"tags"},be={class:"tag"},ye={class:"text-field multiline"},ge={class:"markdown__ru"},ke={class:"markdown__en"},we={class:"review__left"};function xe(t,e,n,p,r,o){const s=l("Breadcrumb"),u=l("a-button"),d=l("RouterLink"),m=l("Toggle"),f=l("ReviewStar"),I=l("Affix"),R=l("VideoSideSection");return i(),c(v,null,[_(s,{class:"breadcrumb",arr:r.breadcrumbArr,title:r.current.title},null,8,["arr","title"]),a("main",pe,[a("div",he,[a("div",me,[a("h1",fe,k(r.current.title)+" ("+k(r.current.year)+")",1),a("ul",ve,[(i(!0),c(v,null,w(r.current.tags,L=>(i(),c("li",be,[_(d,{to:`/tags/${L.toLowerCase()}`},{default:x(()=>[_(u,null,{default:x(()=>[$(k(L.toLowerCase()),1)]),_:2},1024)]),_:2},1032,["to"])]))),256))]),r.filesLoaded==2?(i(),b(m,{key:0,class:"toggle",toggleValue:o.toggleValue,checked:r.en},null,8,["toggleValue","checked"])):j("",!0),(i(!0),c(v,null,w(r.current.rating,L=>y((i(),b(f,null,null,512)),[[g,!isNaN(r.current.rating)]])),256))]),a("div",ye,[y(a("div",ge,null,512),[[g,!r.en]]),y(a("div",ke,null,512),[[g,r.en]])])]),a("div",we,[r.isAffix?(i(),b(I,{key:0,current:r.current},null,8,["current"])):(i(),b(R,{key:1,current:r.current},null,8,["current"]))])])],64)}const Le={name:"AppVideo",components:{ReviewStar:D,Toggle:G,Affix:_e,VideoSideSection:T,Breadcrumb:E},inject:["json"],data(){return{arr:this.json.filter(t=>t.type=="review"),current:null,en:!1,isLargeScreen:S("(min-width: 1024px)"),textEn:"",textRu:"",filesLoaded:0,isAffix:S("(min-width: 1300px)"),breadcrumbArr:[{title:"Home",link:"/"}]}},computed:{calculateWidth(){return this.isLargeScreen?640:400}},methods:{toggleValue(t){this.en=t},updateScreen(){this.isLargeScreen=S("(min-width: 1024px)")},addBreadcrumbLink(t){let e={};t=="review"?(e.title="Reviews",e.link="/videos",this.breadcrumbArr.push(e)):t=="weekly"?(e.title="Weekly Track Roundups",e.link="/wtr",this.breadcrumbArr.push(e)):t=="YUNOREVIEW"?(e.title="YUNOREVIEWs",e.link="/ynr",this.breadcrumbArr.push(e)):t=="TRACK REVIEW"?(e.title="TRACK REVIEW",e.link="/trkrvws",this.breadcrumbArr.push(e)):t=="list-week"?(e.title="list week",e.link="/list-week",this.breadcrumbArr.push(e)):t=="podcast"?(e.title="podcasts",e.link="/podcasts",this.breadcrumbArr.push(e)):t=="vinyl"?(e.title="vinyls",e.link="/vinyls",this.breadcrumbArr.push(e)):t=="other"&&(e.title="other",e.link="/other",this.breadcrumbArr.push(e))},stringToHTML(t){let e=document.createElement("div");return e.innerHTML=t,e}},async created(){this.current=this.json.filter(n=>n.id==this.$route.params.video)[0],this.addBreadcrumbLink(this.current.type),V(`${this.$route.params.video}-en`).then(n=>{if(n!=="")this.textEn=n,this.en=!0,this.filesLoaded++,document.querySelector(".markdown__en").innerHTML=this.textEn;else throw new Error("Not found")}).catch(n=>{console.log(n)}),V(`${this.$route.params.video}-ru`).then(n=>{if(n!=="")this.textRu=n,this.en=!1,this.filesLoaded++,document.querySelector(".markdown__ru").innerHTML=this.textRu;else throw new Error("Not found")}).catch(n=>{console.log(n)})}},Se=h(Le,[["render",xe],["__scopeId","data-v-080d6b39"]]);function Ve(t,e,n,p,r,o){const s=l("AppHeader"),u=l("AppVideo"),d=l("a-back-top");return i(),c(v,null,[_(s),_(u),_(d)],64)}const Ae={components:{AppHeader:N,AppVideo:Se}},Re=h(Ae,[["render",Ve]]);export{Re as default};
