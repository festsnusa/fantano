import{A as M}from"./AppPreloader-88bb5c3a.js";import{l as w,r as p,o as l,c as g,d as _,w as A,f as c,q as B,b as a,s as R,F as u,e as P,t as d,v as y,h as D,p as f,i as S,m as b,_ as x,u as m,k as v,g as j}from"./index-18dc3d86.js";import{B as q,g as O}from"./helper-ee67cbe5.js";import{u as U}from"./index-c75af9a5.js";const C=w("year",{state:()=>({currentYear:""}),persist:{storage:sessionStorage}}),Y=w("rating",{state:()=>({currentRating:""}),persist:{storage:sessionStorage}}),N=t=>(f("data-v-0bb215a9"),t=t(),S(),t),G={class:"search"},z=N(()=>a("option",{value:""},"Filter by year",-1)),E=["value"],H=N(()=>a("option",{value:""},"Filter by rating",-1)),Q=["value"];function J(t,e,s,k,r,i){const n=p("a-button");return l(),g("div",G,[_(n,{onClick:s.sort},{default:A(()=>[D("Reverse")]),_:1},8,["onClick"]),c(a("input",{class:"search__input",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>r.text=o),onInput:e[1]||(e[1]=o=>s.searchReview(r.text)),placeholder:"Search by title..."},null,544),[[B,r.text]]),c(a("select",{class:"search__select","onUpdate:modelValue":e[2]||(e[2]=o=>r.year=o),name:"select",onChange:e[3]||(e[3]=o=>s.filterByYear(r.year,r.rating))},[z,(l(!0),g(u,null,P(s.years,o=>(l(),g("option",{value:o},d(o),9,E))),256))],544),[[R,r.year]]),c(a("select",{class:"search__select_rating","onUpdate:modelValue":e[4]||(e[4]=o=>r.rating=o),name:"select_rating",onChange:e[5]||(e[5]=o=>s.filterByRating(r.rating,r.year))},[H,(l(!0),g(u,null,P(r.ratings,o=>(l(),g("option",{value:o},d(o),9,Q))),256))],544),[[R,r.rating],[y,s.type=="review"]])])}const K={name:"AppFilter",props:["filterByYear","searchReview","filterByRating","type","years","sort"],data(){return{text:"",year:"",rating:"",ratings:[10,9,8,7,6,5,4,3,2,1,0,"NOT GOOD","NOT BAD","CLASSIC","-"]}},computed:{...b(C,Y)},mounted(){this.year=this.yearStore.currentYear,this.rating=this.ratingStore.currentRating,this.type!="review"&&(this.ratingStore.currentRating=""),this.yearStore.$subscribe((t,e)=>{this.year=e.currentYear}),this.ratingStore.$subscribe((t,e)=>{this.rating=e.currentRating})}},W=x(K,[["render",J],["__scopeId","data-v-0bb215a9"]]),I=w("page",{state:()=>({currentPage:1}),persist:{storage:sessionStorage}}),X=t=>(f("data-v-9b0a5946"),t=t(),S(),t),Z={class:"pagination"},$={class:"pagination__header"},ee={key:0},te=["onClick"],se={key:0},re={class:"pagination__footer"},ie={class:"gotoPage"},ae=X(()=>a("span",null,"Go to page",-1));function ne(t,e,s,k,r,i){return l(),g("div",Z,[a("div",$,[a("div",{class:m({"arrow left":!0,disabled:r.page==1}),onClick:e[0]||(e[0]=(...n)=>i.prev&&i.prev(...n))},null,2),s.totalPages>i.displayedPages[i.displayedPages.length-2]&&i.firstPage>1?(l(),g(u,{key:0},[a("div",{class:"item",onClick:e[1]||(e[1]=n=>i.setIndex(1))},d(1)),i.firstPage>2?(l(),g("div",ee,"...")):v("",!0)],64)):v("",!0),(l(!0),g(u,null,P(i.displayedPages,n=>(l(),g("div",{key:`pagination-item-${n}`,class:m({item:!0,on:r.page==n}),onClick:o=>i.setIndex(n)},d(n),11,te))),128)),s.totalPages>i.displayedPages[i.displayedPages.length-1]?(l(),g(u,{key:1},[i.lastPage<s.totalPages-1?(l(),g("div",se,"...")):v("",!0),a("div",{class:"item",onClick:e[2]||(e[2]=n=>i.setIndex(s.totalPages))},d(s.totalPages),1)],64)):v("",!0),a("div",{class:m({"arrow right":!0,disabled:r.page==s.totalPages}),onClick:e[3]||(e[3]=(...n)=>i.next&&i.next(...n))},null,2)]),a("div",re,[a("div",ie,[ae,c(a("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=n=>r.gotoNumber=n)},null,512),[[B,r.gotoNumber]]),a("button",{onClick:e[5]||(e[5]=n=>i.gotopage(Number(r.gotoNumber)))},"Go")])])])}const oe={name:"AppPagination",props:["reviews","totalPages"],data(){return{page:1,perPage:16,maxVisibleButtons:8,gotoNumber:""}},computed:{...b(I),paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},firstPage(){return Math.max(this.page-(this.page===this.totalPages?2:1),1)},lastPage(){return Math.min(this.page+(this.page===1?2:1),this.totalPages)},displayedPages(){return this.totalPages<=this.maxVisibleButtons||this.page>this.totalPages?this.totalPages:Array.from({length:this.lastPage-this.firstPage+1},(t,e)=>e+this.firstPage)}},methods:{prev(){this.pageStore.currentPage=Math.max(this.page-1,1)},next(){this.pageStore.currentPage=Math.min(this.page+1,this.totalPages)},setIndex(t){this.pageStore.currentPage=t},gotopage(t){this.gotoNumber="",!(isNaN(t)||t<1||t>this.totalPages)&&this.setIndex(t)}},created(){this.page=this.pageStore.currentPage,this.pageStore.$subscribe((t,e)=>{this.page=e.currentPage})}},le=x(oe,[["render",ne],["__scopeId","data-v-9b0a5946"]]),ge=t=>(f("data-v-c42a6202"),t=t(),S(),t),he={class:"reviews"},ce={class:"reviews__left"},ue={key:0,class:"reviews__content"},pe=["src","alt","onLoad"],de={class:"review__title"},_e={key:1,class:"reviews__content"},ve=ge(()=>a("p",null,"No videos",-1)),ye=[ve],Pe={class:"reviews__right"};function me(t,e,s,k,r,i){const n=p("Breadcrumb"),o=p("AppPreloader"),V=p("RouterLink"),T=p("AppPagination"),L=p("AppFilter");return l(),g(u,null,[_(n,{class:"breadcrumb",arr:r.breadcrumbArr,title:s.title},null,8,["arr","title"]),a("main",he,[a("section",ce,[r.reviews.length?(l(),g("div",ue,[(l(!0),g(u,null,P(i.paginatedData,(h,F)=>(l(),j(V,{class:"review",key:F,to:`/videos/${h.id}`},{default:A(()=>[c(_(o,null,null,512),[[y,!h.imageShow]]),c(a("img",{class:"review__image",src:r.thumbnail(h.video),alt:h.title,onLoad:fe=>h.imageShow=!0},null,40,pe),[[y,h.imageShow]]),a("p",de,d(h.title),1)]),_:2},1032,["to"]))),128))])):(l(),g("div",_e,ye)),c(_(T,{reviews:r.reviews,totalPages:r.totalPages},null,8,["reviews","totalPages"]),[[y,r.reviews.length]])]),a("aside",Pe,[_(L,{filterByYear:i.filterByYear,searchReview:i.searchReview,sort:i.sort,filterByRating:i.filterByRating,type:s.type,years:s.years},null,8,["filterByYear","searchReview","sort","filterByRating","type","years"])])])],64)}const we={name:"AppVideos",props:["type","years","title"],inject:["json"],components:{AppFilter:W,AppPreloader:M,AppPagination:le,Breadcrumb:q},data(){return{firstChannel:this.json.filter(t=>t.type==this.type),reviews:[],page:1,perPage:20,totalPages:1,gotoNumber:"",isLargeScreen:U("(min-width: 1024px)"),thumbnail:O,breadcrumbArr:[{title:"Home",link:"/"}]}},computed:{paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},...b(I,C,Y)},methods:{sort(){this.reviews=this.reviews.reverse()},setTotalPages(){this.totalPages=Math.ceil(this.reviews.length/this.perPage)},filterByYear(t,e){this.reviews=this.json.filter(s=>s.type==this.type),this.pageStore.currentPage=1,document.querySelector(".search__input").value="",this.yearStore.currentYear=t,t!=""&&(this.reviews=this.reviews.filter(s=>s.year==t)),this.type=="review"&&e!=""&&(this.reviews=this.reviews.filter(s=>s.rating==e)),this.setTotalPages()},filterByRating(t,e){if(this.reviews=this.json.filter(s=>s.type==this.type),this.pageStore.currentPage=1,document.querySelector(".search__input").value="",e!==""&&(this.reviews=this.reviews.filter(s=>s.year==e)),this.ratingStore.currentRating=t,t===""){this.setTotalPages();return}this.reviews=this.reviews.filter(s=>s.rating==t),this.setTotalPages()},searchReview(t){if(this.reviews=this.json.filter(e=>e.type==this.type),this.pageStore.currentPage=1,this.yearStore.currentYear="",document.querySelector(".search__select").value="",this.ratingStore.currentRating="",t.length==0){this.setTotalPages();return}this.reviews=this.reviews.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())),this.setTotalPages()},checkYears(){this.years.includes(Number(this.yearStore.currentYear))||(this.yearStore.currentYear="")}},created(){this.reviews=this.firstChannel,this.perPage=this.isLargeScreen?20:6,this.checkYears(),this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(t=>t.year==+this.yearStore.currentYear)),this.totalPages=Math.ceil(this.reviews.length/this.perPage),this.pageStore.currentPage=this.pageStore.currentPage>this.totalPages?1:this.pageStore.currentPage,this.page=this.pageStore.currentPage,this.pageStore.$subscribe((t,e)=>{this.page=e.currentPage})},mounted(){this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(t=>t.year==this.yearStore.currentYear)),this.ratingStore.currentRating!=""&&(this.reviews=this.reviews.filter(t=>t.rating==this.ratingStore.currentRating)),this.setTotalPages()}},Re=x(we,[["render",me],["__scopeId","data-v-c42a6202"]]);export{Re as A,le as a,I as u};
