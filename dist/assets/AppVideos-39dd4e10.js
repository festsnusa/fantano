import{A as D}from"./AppPreloader-1ae8a952.js";import{K as f,o,c as l,e as h,L as Y,a as n,N as A,F as u,d as y,t as c,v,p as w,g as S,O as b,_ as x,k as P,m as p,r as d,f as F,w as L,b as m}from"./index-c6354973.js";import{j as _}from"./main-channel-b5190c06.js";const R=f("year",{state:()=>({currentYear:""}),persist:{storage:sessionStorage}}),C=e=>(w("data-v-5d80ec88"),e=e(),S(),e),q={class:"search"},O=C(()=>n("option",{value:""},"Filter by year",-1)),T=["value"],U=C(()=>n("option",{value:""},"Filter by rating",-1)),j=["value"];function G(e,t,a,k,i,r){return o(),l("div",q,[h(n("input",{class:"search__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>i.text=s),onInput:t[1]||(t[1]=s=>a.searchReview(i.text)),placeholder:"Search by title..."},null,544),[[Y,i.text]]),h(n("select",{class:"search__select","onUpdate:modelValue":t[2]||(t[2]=s=>i.year=s),name:"select",onChange:t[3]||(t[3]=(...s)=>a.filterByYear&&a.filterByYear(...s))},[O,(o(!0),l(u,null,y(a.years,s=>(o(),l("option",{value:s},c(s),9,T))),256))],544),[[A,i.year]]),h(n("select",{class:"search__select_rating","onUpdate:modelValue":t[4]||(t[4]=s=>i.rating=s),name:"select_rating",onChange:t[5]||(t[5]=(...s)=>a.filterByRating&&a.filterByRating(...s))},[U,(o(!0),l(u,null,y(i.ratings,s=>(o(),l("option",{value:s},c(s),9,j))),256))],544),[[A,i.rating],[v,a.type=="review"]])])}const E={name:"AppFilter",props:["filterByYear","searchReview","filterByRating","type","years"],data(){return{text:"",year:"",rating:"",ratings:[10,9,8,7,6,5,4,3,2,1,0,"NOT GOOD","NOT BAD","CLASSIC","-"]}},computed:{...b(R)},mounted(){this.year=this.yearStore.currentYear,this.yearStore.$subscribe((e,t)=>{this.year=t.currentYear})}},z=x(E,[["render",G],["__scopeId","data-v-5d80ec88"]]),I=f("page",{state:()=>({currentPage:1}),persist:{storage:sessionStorage}}),K=e=>(w("data-v-9ccb950d"),e=e(),S(),e),H={class:"pagination"},J={key:0},Q=["onClick"],W={key:0},X={class:"gotoPage"},Z=K(()=>n("span",null,"Go to page",-1));function $(e,t,a,k,i,r){return o(),l("div",H,[n("div",{class:P({"arrow left":!0,disabled:i.page==1}),onClick:t[0]||(t[0]=(...s)=>r.prev&&r.prev(...s))},null,2),a.totalPages>r.displayedPages[r.displayedPages.length-2]&&r.firstPage>1?(o(),l(u,{key:0},[n("div",{class:"item",onClick:t[1]||(t[1]=s=>r.setIndex(1))},c(1)),r.firstPage>2?(o(),l("div",J,"...")):p("",!0)],64)):p("",!0),(o(!0),l(u,null,y(r.displayedPages,s=>(o(),l("div",{key:`pagination-item-${s}`,class:P({item:!0,on:i.page==s}),onClick:B=>r.setIndex(s)},c(s),11,Q))),128)),a.totalPages>r.displayedPages[r.displayedPages.length-1]?(o(),l(u,{key:1},[r.lastPage<a.totalPages-1?(o(),l("div",W,"...")):p("",!0),n("div",{class:"item",onClick:t[2]||(t[2]=s=>r.setIndex(a.totalPages))},c(a.totalPages),1)],64)):p("",!0),n("div",{class:P({"arrow right":!0,disabled:i.page==a.totalPages}),onClick:t[3]||(t[3]=(...s)=>r.next&&r.next(...s))},null,2),n("div",X,[Z,h(n("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>i.gotoNumber=s)},null,512),[[Y,i.gotoNumber]]),n("button",{onClick:t[5]||(t[5]=s=>r.gotopage(Number(i.gotoNumber)))},"Go")])])}const ee={name:"AppPagination",props:["reviews","totalPages"],data(){return{page:1,perPage:16,maxVisibleButtons:10,gotoNumber:""}},computed:{...b(I),paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},firstPage(){return Math.max(this.page-(this.page===this.totalPages?2:1),1)},lastPage(){return Math.min(this.page+(this.page===1?2:1),this.totalPages)},displayedPages(){return this.totalPages<=this.maxVisibleButtons||this.page>this.totalPages?this.totalPages:Array.from({length:this.lastPage-this.firstPage+1},(e,t)=>t+this.firstPage)}},methods:{prev(){this.pageStore.currentPage=Math.max(this.page-1,1)},next(){this.pageStore.currentPage=Math.min(this.page+1,this.totalPages)},setIndex(e){this.pageStore.currentPage=e},gotopage(e){this.gotoNumber="",!(isNaN(e)||e<1||e>this.totalPages)&&this.setIndex(e)}},created(){this.page=this.pageStore.currentPage,this.pageStore.$subscribe((e,t)=>{this.page=t.currentPage})}},te=x(ee,[["render",$],["__scopeId","data-v-9ccb950d"]]),se=f("rating",{state:()=>({currentRating:""}),persist:{storage:sessionStorage}}),re=e=>(w("data-v-a4396a2d"),e=e(),S(),e),ae={class:"reviews"},ie={class:"reviews__left"},ne={class:"reviews__heading"},oe={key:0,class:"reviews__content"},le=["src","alt","onLoad"],ge={class:"review__title"},he={key:1,class:"reviews__content"},ce=re(()=>n("p",null,"No videos",-1)),ue=[ce],pe={class:"reviews__right"};function de(e,t,a,k,i,r){const s=d("AppPreloader"),B=d("RouterLink"),N=d("AppPagination"),V=d("AppFilter");return o(),l("main",ae,[n("section",ie,[n("h2",ne,c(a.title),1),i.reviews.length?(o(),l("div",oe,[(o(!0),l(u,null,y(r.paginatedData,(g,M)=>(o(),F(B,{class:"review",key:M,to:`/videos/${g.id}`},{default:L(()=>[h(m(s,null,null,512),[[v,!g.imageShow]]),h(n("img",{class:"review__image",src:r.getThumbnail(g.video),alt:g.title,onLoad:ve=>g.imageShow=!0},null,40,le),[[v,g.imageShow]]),n("p",ge,c(g.title),1)]),_:2},1032,["to"]))),128))])):(o(),l("div",he,ue)),h(m(N,{reviews:i.reviews,totalPages:i.totalPages},null,8,["reviews","totalPages"]),[[v,i.reviews.length]])]),n("aside",pe,[m(V,{filterByYear:r.filterByYear,searchReview:r.searchReview,filterByRating:r.filterByRating,type:a.type,years:a.years},null,8,["filterByYear","searchReview","filterByRating","type","years"])])])}const _e={name:"AppVideos",props:["type","years","title"],components:{AppFilter:z,AppPreloader:D,AppPagination:te},data(){return{reviews:_.filter(e=>e.type==this.type),page:1,perPage:16,totalPages:1,maxVisibleButtons:10,gotoNumber:""}},computed:{paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},...b(I,R,se),firstPage(){return Math.max(this.page-(this.page===this.totalPages?2:1),1)},lastPage(){return Math.min(this.page+(this.page===1?2:1),this.totalPages)},displayedPages(){return this.totalPages<=this.maxVisibleButtons||this.page>this.totalPages?this.totalPages:Array.from({length:this.lastPage-this.firstPage+1},(e,t)=>t+this.firstPage)}},methods:{getThumbnail(e){return`http://img.youtube.com/vi/${this.getVideoID(e)}/0.jpg`},getVideoID(e){let t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,a=e.match(t);return a&&a[7].length==11?a[7]:!1},filterByYear(){if(this.reviews=_.filter(e=>e.type==this.type),this.pageStore.currentPage=1,document.querySelector(".search__input").value="",this.yearStore.currentYear=document.querySelector(".search__select").value,this.yearStore.currentYear==""){this.totalPages=Math.ceil(this.reviews.length/this.perPage);return}this.reviews=this.reviews.filter(e=>e.year==this.yearStore.currentYear),this.totalPages=Math.ceil(this.reviews.length/this.perPage)},filterByRating(){this.reviews=_.filter(e=>e.type==this.type),this.pageStore.currentPage=1,document.querySelector(".search__input").value="",this.ratingStore.currentRating=document.querySelector(".search__select_rating").value,this.ratingStore.currentRating!=""&&(this.reviews=this.reviews.filter(e=>e.rating==this.ratingStore.currentRating),this.totalPages=Math.ceil(this.reviews.length/this.perPage))},searchReview(e){this.reviews=_.filter(t=>t.type==this.type),this.pageStore.currentPage=1,document.querySelector(".search__select").value="",e.length!=0&&(this.reviews=this.reviews.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())))},checkYears(){this.years.includes(Number(this.yearStore.currentYear))||(this.yearStore.currentYear="")}},created(){this.checkYears(),this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(e=>e.year==+this.yearStore.currentYear)),this.totalPages=Math.ceil(this.reviews.length/this.perPage),this.pageStore.currentPage=this.pageStore.currentPage>this.totalPages?1:this.pageStore.currentPage,this.page=this.pageStore.currentPage,this.pageStore.$subscribe((e,t)=>{this.page=t.currentPage})},mounted(){this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(e=>e.year==this.yearStore.currentYear))}},fe=x(_e,[["render",de],["__scopeId","data-v-a4396a2d"]]);export{fe as A};
