import{A as V,a as T}from"./AppContent-b6c4504c.js";import{x as y,r as u,o as l,c as g,d as c,w as F,i as p,y as S,b as a,z as b,F as h,j as f,t as d,v as R,e as M,p as x,f as C,u as P,_ as m,A as _,m as v,s as j}from"./index-bae1d001.js";import{B as D}from"./Breadcrumb-76063279.js";import{u as L}from"./index-8c6fd087.js";const A=y("year",{state:()=>({currentYear:""}),persist:{storage:sessionStorage}}),B=y("rating",{state:()=>({currentRating:""}),persist:{storage:sessionStorage}}),Y=t=>(x("data-v-945fbb8b"),t=t(),C(),t),O={class:"search"},U=Y(()=>a("option",{value:""},"Filter by year",-1)),G=["value"],z=Y(()=>a("option",{value:""},"Filter by rating",-1)),E=["value"];function H(t,e,s,w,r,i){const n=u("a-button");return l(),g("div",O,[c(n,{onClick:s.sort},{default:F(()=>[M("Reverse")]),_:1},8,["onClick"]),p(a("input",{class:"search__input",ref:"inputRef",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>r.text=o),onInput:e[1]||(e[1]=o=>s.searchReview(r.text)),placeholder:"Search by title..."},null,544),[[S,r.text]]),p(a("select",{class:"search__select",ref:"selectRef","onUpdate:modelValue":e[2]||(e[2]=o=>r.year=o),name:"select",onChange:e[3]||(e[3]=o=>s.filterByYear(r.year,r.rating))},[U,(l(!0),g(h,null,f(s.years,o=>(l(),g("option",{value:o},d(o),9,G))),256))],544),[[b,r.year]]),p(a("select",{class:"search__select_rating","onUpdate:modelValue":e[4]||(e[4]=o=>r.rating=o),name:"select_rating",onChange:e[5]||(e[5]=o=>s.filterByRating(r.rating,r.year))},[z,(l(!0),g(h,null,f(r.ratings,o=>(l(),g("option",{value:o},d(o),9,E))),256))],544),[[b,r.rating],[R,s.type=="review"]])])}const Q={name:"AppFilter",props:["filterByYear","searchReview","filterByRating","type","years","sort"],data(){return{text:"",year:"",rating:"",ratings:[10,9,8,7,6,5,4,3,2,1,0,"NOT GOOD","NOT BAD","CLASSIC","-"]}},computed:{...P(A,B)},mounted(){this.year=this.yearStore.currentYear,this.rating=this.ratingStore.currentRating,this.type!="review"&&(this.ratingStore.currentRating=""),this.yearStore.$subscribe((t,e)=>{this.year=e.currentYear}),this.ratingStore.$subscribe((t,e)=>{this.rating=e.currentRating})}},q=m(Q,[["render",H],["__scopeId","data-v-945fbb8b"]]),k=y("page",{state:()=>({currentPage:1}),persist:{storage:sessionStorage}}),J=t=>(x("data-v-9b0a5946"),t=t(),C(),t),K={class:"pagination"},W={class:"pagination__header"},X={key:0},Z=["onClick"],$={key:0},ee={class:"pagination__footer"},te={class:"gotoPage"},se=J(()=>a("span",null,"Go to page",-1));function re(t,e,s,w,r,i){return l(),g("div",K,[a("div",W,[a("div",{class:_({"arrow left":!0,disabled:r.page==1}),onClick:e[0]||(e[0]=(...n)=>i.prev&&i.prev(...n))},null,2),s.totalPages>i.displayedPages[i.displayedPages.length-2]&&i.firstPage>1?(l(),g(h,{key:0},[a("div",{class:"item",onClick:e[1]||(e[1]=n=>i.setIndex(1))},d(1)),i.firstPage>2?(l(),g("div",X,"...")):v("",!0)],64)):v("",!0),(l(!0),g(h,null,f(i.displayedPages,n=>(l(),g("div",{key:`pagination-item-${n}`,class:_({item:!0,on:r.page==n}),onClick:o=>i.setIndex(n)},d(n),11,Z))),128)),s.totalPages>i.displayedPages[i.displayedPages.length-1]?(l(),g(h,{key:1},[i.lastPage<s.totalPages-1?(l(),g("div",$,"...")):v("",!0),a("div",{class:"item",onClick:e[2]||(e[2]=n=>i.setIndex(s.totalPages))},d(s.totalPages),1)],64)):v("",!0),a("div",{class:_({"arrow right":!0,disabled:r.page==s.totalPages}),onClick:e[3]||(e[3]=(...n)=>i.next&&i.next(...n))},null,2)]),a("div",ee,[a("div",te,[se,p(a("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=n=>r.gotoNumber=n)},null,512),[[S,r.gotoNumber]]),a("button",{onClick:e[5]||(e[5]=n=>i.gotopage(Number(r.gotoNumber)))},"Go")])])])}const ie={name:"AppPagination",props:["reviews","totalPages"],data(){return{page:1,perPage:16,maxVisibleButtons:8,gotoNumber:""}},computed:{...P(k),paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},firstPage(){return Math.max(this.page-(this.page===this.totalPages?2:1),1)},lastPage(){return Math.min(this.page+(this.page===1?2:1),this.totalPages)},displayedPages(){return this.totalPages<=this.maxVisibleButtons||this.page>this.totalPages?this.totalPages:Array.from({length:this.lastPage-this.firstPage+1},(t,e)=>e+this.firstPage)}},methods:{prev(){this.pageStore.currentPage=Math.max(this.page-1,1)},next(){this.pageStore.currentPage=Math.min(this.page+1,this.totalPages)},setIndex(t){this.pageStore.currentPage=t},gotopage(t){this.gotoNumber="",!(isNaN(t)||t<1||t>this.totalPages)&&this.setIndex(t)}},created(){this.page=this.pageStore.currentPage,this.pageStore.$subscribe((t,e)=>{this.page=e.currentPage})}},ae=m(ie,[["render",re],["__scopeId","data-v-9b0a5946"]]),ne={class:"reviews"},oe={class:"reviews__left"},le={class:"reviews__right"};function ge(t,e,s,w,r,i){const n=u("Breadcrumb"),o=u("AppContent"),N=u("AppPagination"),I=u("AppFilter");return l(),g(h,null,[c(n,{class:"breadcrumb",arr:r.breadcrumbArr,title:s.title},null,8,["arr","title"]),a("main",ne,[a("section",oe,[c(o,{arr:i.paginatedData,contentCount:r.reviews.length},null,8,["arr","contentCount"]),p(c(N,{reviews:r.reviews,totalPages:r.totalPages},null,8,["reviews","totalPages"]),[[R,r.reviews.length]])]),a("aside",le,[c(I,{ref:"childRef",filterByYear:i.filterByYear,searchReview:i.searchReview,sort:i.sort,filterByRating:i.filterByRating,type:s.type,years:s.years},null,8,["filterByYear","searchReview","sort","filterByRating","type","years"])])])],64)}const he={name:"AppVideos",props:["type","years","title"],inject:["json"],components:{AppContent:V,AppFilter:q,AppPreloader:T,AppPagination:ae,Breadcrumb:D},data(){return{firstChannel:this.json.filter(t=>t.type==this.type),reviews:[],page:1,perPage:20,totalPages:1,gotoNumber:"",isLargeScreen:L("(min-width: 1024px)"),thumbnail:j,breadcrumbArr:[{title:"Home",link:"/"}]}},computed:{paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},...P(k,A,B)},methods:{sort(){this.reviews=this.reviews.reverse()},setTotalPages(){this.totalPages=Math.ceil(this.reviews.length/this.perPage)},filterByYear(t,e){this.reviews=this.json.filter(s=>s.type==this.type),this.pageStore.currentPage=1,this.$refs.childRef.$refs.inputRef.value="",this.yearStore.currentYear=t,t!=""&&(this.reviews=this.reviews.filter(s=>s.year==t)),this.type=="review"&&e!=""&&(this.reviews=this.reviews.filter(s=>s.rating==e)),this.setTotalPages()},filterByRating(t,e){if(this.reviews=this.json.filter(s=>s.type==this.type),this.pageStore.currentPage=1,this.$refs.childRef.$refs.inputRef.value="",e!==""&&(this.reviews=this.reviews.filter(s=>s.year==e)),this.ratingStore.currentRating=t,t===""){this.setTotalPages();return}this.reviews=this.reviews.filter(s=>s.rating==t),this.setTotalPages()},searchReview(t){if(this.reviews=this.json.filter(e=>e.type==this.type),this.pageStore.currentPage=1,this.yearStore.currentYear="",this.$refs.childRef.$refs.selectRef.value="",this.ratingStore.currentRating="",t.length==0){this.setTotalPages();return}this.reviews=this.reviews.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())),this.setTotalPages()},checkYears(){this.years.includes(Number(this.yearStore.currentYear))||(this.yearStore.currentYear="")}},created(){this.reviews=this.firstChannel,this.perPage=this.isLargeScreen?20:6,this.checkYears(),this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(t=>t.year==+this.yearStore.currentYear)),this.totalPages=Math.ceil(this.reviews.length/this.perPage),this.pageStore.currentPage=this.pageStore.currentPage>this.totalPages?1:this.pageStore.currentPage,this.page=this.pageStore.currentPage,this.pageStore.$subscribe((t,e)=>{this.page=e.currentPage})},mounted(){this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(t=>t.year==this.yearStore.currentYear)),this.ratingStore.currentRating!=""&&(this.reviews=this.reviews.filter(t=>t.rating==this.ratingStore.currentRating)),this.setTotalPages()}},ve=m(he,[["render",ge],["__scopeId","data-v-62324e7d"]]);export{ve as A,ae as a,k as u};
