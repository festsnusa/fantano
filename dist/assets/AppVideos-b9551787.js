import{A as k}from"./AppPreloader-d3a16ff5.js";import{K as v,o as l,c,e as u,L as A,a as i,N as S,F as p,d as h,t as _,v as y,p as C,g as V,O as f,_ as m,r as d,f as F,w as D,b as w,k as I}from"./index-3890529f.js";import{j as g}from"./main-channel-dc20f4bd.js";const P=v("year",{state:()=>({currentYear:""}),persist:{storage:sessionStorage}}),b=e=>(C("data-v-a143bde1"),e=e(),V(),e),L={class:"search"},T=b(()=>i("option",{value:""},"Filter by year",-1)),q=["value"],M=b(()=>i("option",{value:""},"Filter by rating",-1)),N=["value"];function O(e,t,a,B,o,n){return l(),c("div",L,[u(i("input",{class:"search__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>o.text=r),onInput:t[1]||(t[1]=r=>a.searchReview(o.text)),placeholder:"Search by title..."},null,544),[[A,o.text]]),u(i("select",{class:"search__select","onUpdate:modelValue":t[2]||(t[2]=r=>o.year=r),name:"select",onChange:t[3]||(t[3]=(...r)=>a.filterByYear&&a.filterByYear(...r))},[T,(l(!0),c(p,null,h(a.years,r=>(l(),c("option",{value:r},_(r),9,q))),256))],544),[[S,o.year]]),u(i("select",{class:"search__select_rating","onUpdate:modelValue":t[4]||(t[4]=r=>o.rating=r),name:"select_rating",onChange:t[5]||(t[5]=(...r)=>a.filterByRating&&a.filterByRating(...r))},[M,(l(!0),c(p,null,h(o.ratings,r=>(l(),c("option",{value:r},_(r),9,N))),256))],544),[[S,o.rating],[y,a.type=="review"]])])}const j={name:"AppFilter",props:["filterByYear","searchReview","filterByRating","type","years"],data(){return{text:"",year:"",rating:"",ratings:[10,9,8,7,6,5,4,3,2,1,0,"NOT GOOD","NOT BAD","-"]}},computed:{...f(P)},mounted(){this.year=this.yearStore.currentYear,this.yearStore.$subscribe((e,t)=>{this.year=t.currentYear})}},U=m(j,[["render",O],["__scopeId","data-v-a143bde1"]]),E=v("page",{state:()=>({currentPage:1}),persist:{storage:sessionStorage}}),z=v("rating",{state:()=>({currentRating:""}),persist:{storage:sessionStorage}}),G={class:"reviews"},K={class:"reviews__left"},H={class:"reviews__content"},J=["src","alt","onLoad"],Q={class:"review__title"},W={class:"pagination"},X=["onClick"],Z={class:"reviews__right"};function $(e,t,a,B,o,n){const r=d("AppPreloader"),R=d("RouterLink"),x=d("AppFilter");return l(),c("div",G,[i("section",K,[i("div",H,[(l(!0),c(p,null,h(n.paginatedData,(s,Y)=>(l(),F(R,{class:"review",key:Y,to:`/videos/${s.id}`},{default:D(()=>[u(w(r,null,null,512),[[y,!s.imageShow]]),u(i("img",{class:"review__image",src:n.getThumbnail(s.video),alt:s.title,onLoad:te=>s.imageShow=!0},null,40,J),[[y,s.imageShow]]),i("p",Q,_(s.title),1)]),_:2},1032,["to"]))),128))]),i("div",W,[i("button",{class:"pagination__prev",onClick:t[0]||(t[0]=(...s)=>n.backPage&&n.backPage(...s))},"«"),(l(!0),c(p,null,h(Math.ceil(this.reviews.length/this.perPage),s=>(l(),c("button",{class:I(["pagination__button",{active:s==o.page}]),key:s,onClick:()=>n.goToPage(s)},_(s),11,X))),128)),i("button",{class:"pagination__next",onClick:t[1]||(t[1]=(...s)=>n.nextPage&&n.nextPage(...s))},"»")])]),i("aside",Z,[w(x,{filterByYear:n.filterByYear,searchReview:n.searchReview,filterByRating:n.filterByRating,type:a.type,years:a.years},null,8,["filterByYear","searchReview","filterByRating","type","years"])])])}const ee={name:"AppVideos",props:["type","years"],components:{AppFilter:U,AppPreloader:k},data(){return{reviews:g.filter(e=>e.type==this.type),page:1,perPage:16,totalPages:1,maxVisibleButtons:10}},computed:{paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},...f(E,P,z)},methods:{getThumbnail(e){return`http://img.youtube.com/vi/${this.getVideoID(e)}/0.jpg`},getVideoID(e){let t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,a=e.match(t);return a&&a[7].length==11?a[7]:!1},nextPage(){this.page!==Math.ceil(this.reviews.length/this.perPage)&&(this.pageStore.currentPage+=1)},backPage(){this.page!==1&&(this.pageStore.currentPage-=1)},goToPage(e){this.pageStore.currentPage=e},filterByYear(){this.reviews=g.filter(e=>e.type==this.type),this.pageStore.currentPage=1,document.querySelector(".search__input").value="",this.yearStore.currentYear=document.querySelector(".search__select").value,this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(e=>e.year==this.yearStore.currentYear))},filterByRating(){this.reviews=g.filter(e=>e.type==this.type),this.pageStore.currentPage=1,document.querySelector(".search__input").value="",this.ratingStore.currentRating=document.querySelector(".search__select_rating").value,this.ratingStore.currentRating!=""&&(this.reviews=this.reviews.filter(e=>e.rating==this.ratingStore.currentRating))},searchReview(e){this.reviews=g.filter(t=>t.type==this.type),this.pageStore.currentPage=1,document.querySelector(".search__select").value="",e.length!=0&&(this.reviews=this.reviews.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())))}},created(){this.totalPages=Math.ceil(this.reviews.length/this.perPage),this.pageStore.currentPage=this.pageStore.currentPage>this.totalPages?1:this.pageStore.currentPage,this.page=this.pageStore.currentPage,this.pageStore.$subscribe((e,t)=>{this.page=t.currentPage})},mounted(){this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(e=>e.year==this.yearStore.currentYear))}},ie=m(ee,[["render",$],["__scopeId","data-v-a8464376"]]);export{ie as A};
