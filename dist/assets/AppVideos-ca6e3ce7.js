import{A as I,a as T}from"./AppContent-e1f39a4d.js";import{y,r as u,o as l,c as g,d as c,w as M,k as p,z as S,b as a,A as w,F as h,f as _,t as d,v as x,e as F,p as R,g as B,x as m,_ as P,B as v,q as f,u as j}from"./index-0ddffbae.js";import{B as D}from"./Breadcrumb-851cc565.js";import{u as L}from"./index-849c54be.js";const A=y("year",{state:()=>({currentYear:""}),persist:{storage:sessionStorage}}),C=y("rating",{state:()=>({currentRating:""}),persist:{storage:sessionStorage}}),k=t=>(R("data-v-945fbb8b"),t=t(),B(),t),O={class:"search"},U=k(()=>a("option",{value:""},"Filter by year",-1)),G=["value"],z=k(()=>a("option",{value:""},"Filter by rating",-1)),q=["value"];function E(t,e,s,b,r,i){const n=u("a-button");return l(),g("div",O,[c(n,{onClick:s.sort},{default:M(()=>[F("Reverse")]),_:1},8,["onClick"]),p(a("input",{class:"search__input",ref:"inputRef",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>r.text=o),onInput:e[1]||(e[1]=o=>s.searchReview(r.text)),placeholder:"Search by title..."},null,544),[[S,r.text]]),p(a("select",{class:"search__select",ref:"selectRef","onUpdate:modelValue":e[2]||(e[2]=o=>r.year=o),name:"select",onChange:e[3]||(e[3]=o=>s.filterByYear(r.year,r.rating))},[U,(l(!0),g(h,null,_(s.years,o=>(l(),g("option",{value:o},d(o),9,G))),256))],544),[[w,r.year]]),p(a("select",{class:"search__select_rating","onUpdate:modelValue":e[4]||(e[4]=o=>r.rating=o),name:"select_rating",onChange:e[5]||(e[5]=o=>s.filterByRating(r.rating,r.year))},[z,(l(!0),g(h,null,_(r.ratings,o=>(l(),g("option",{value:o},d(o),9,q))),256))],544),[[w,r.rating],[x,s.type=="review"]])])}const H={name:"AppFilter",props:["filterByYear","searchReview","filterByRating","type","years","sort"],data(){return{text:"",year:"",rating:"",ratings:[10,9,8,7,6,5,4,3,2,1,0,"NOT GOOD","NOT BAD","CLASSIC","-"]}},computed:{...m(A,C)},mounted(){this.year=this.yearStore.currentYear,this.rating=this.ratingStore.currentRating,this.type!="review"&&(this.ratingStore.currentRating=""),this.yearStore.$subscribe((t,e)=>{this.year=e.currentYear}),this.ratingStore.$subscribe((t,e)=>{this.rating=e.currentRating})}},Q=P(H,[["render",E],["__scopeId","data-v-945fbb8b"]]),V=y("page",{state:()=>({currentPage:1}),persist:{storage:sessionStorage}}),J=t=>(R("data-v-65436a70"),t=t(),B(),t),K={class:"pagination"},W={class:"pagination__header"},X={key:0},Z=["onClick"],$={key:0},ee={class:"pagination__footer"},te={class:"gotoPage"},se=J(()=>a("span",null,"Go to page",-1));function re(t,e,s,b,r,i){return l(),g("div",K,[a("div",W,[a("div",{class:v({"arrow left":!0,disabled:r.page==1}),onClick:e[0]||(e[0]=(...n)=>i.prev&&i.prev(...n))},null,2),s.totalPages>i.displayedPages[i.displayedPages.length-2]&&i.firstPage>1?(l(),g(h,{key:0},[a("div",{class:"item",onClick:e[1]||(e[1]=n=>i.setIndex(1))},d(1)),i.firstPage>2?(l(),g("div",X,"...")):f("",!0)],64)):f("",!0),(l(!0),g(h,null,_(i.displayedPages,n=>(l(),g("div",{key:`pagination-item-${n}`,class:v({item:!0,on:r.page==n}),onClick:o=>i.setIndex(n)},d(n),11,Z))),128)),s.totalPages>i.displayedPages[i.displayedPages.length-1]?(l(),g(h,{key:1},[i.lastPage<s.totalPages-1?(l(),g("div",$,"...")):f("",!0),a("div",{class:"item",onClick:e[2]||(e[2]=n=>i.setIndex(s.totalPages))},d(s.totalPages),1)],64)):f("",!0),a("div",{class:v({"arrow right":!0,disabled:r.page==s.totalPages}),onClick:e[3]||(e[3]=(...n)=>i.next&&i.next(...n))},null,2)]),a("div",ee,[a("div",te,[se,p(a("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=n=>r.gotoNumber=n)},null,512),[[S,r.gotoNumber]]),a("button",{onClick:e[5]||(e[5]=n=>i.gotopage(Number(r.gotoNumber)))},"Go")])])])}const ie={name:"AppPagination",props:["reviews","totalPages"],data(){return{page:1,maxVisibleButtons:10,gotoNumber:""}},computed:{...m(V),firstPage(){const t=Math.floor(this.maxVisibleButtons/2);let e=Math.max(this.page-t,1);return this.totalPages-e<this.maxVisibleButtons-1&&(e=Math.max(this.totalPages-this.maxVisibleButtons+1,1)),e},lastPage(){const t=Math.floor(this.maxVisibleButtons/2);let e=Math.min(this.page+t,this.totalPages);return e-this.firstPage<this.maxVisibleButtons-1&&(e=Math.min(this.firstPage+this.maxVisibleButtons-1,this.totalPages)),e},displayedPages(){return this.totalPages<=this.maxVisibleButtons||this.page>this.totalPages?Array.from({length:this.totalPages},(t,e)=>e+1):Array.from({length:this.lastPage-this.firstPage+1},(t,e)=>e+this.firstPage)}},methods:{prev(){this.pageStore.currentPage=Math.max(this.page-1,1)},next(){this.pageStore.currentPage=Math.min(this.page+1,this.totalPages)},setIndex(t){this.pageStore.currentPage=t},gotopage(t){this.gotoNumber="",!(isNaN(t)||t<1||t>this.totalPages)&&this.setIndex(t)}},created(){this.page=this.pageStore.currentPage,this.pageStore.$subscribe((t,e)=>{this.page=e.currentPage})}},ae=P(ie,[["render",re],["__scopeId","data-v-65436a70"]]),ne={class:"reviews"},oe={class:"reviews__left"},le={class:"reviews__right"};function ge(t,e,s,b,r,i){const n=u("Breadcrumb"),o=u("AppContent"),Y=u("AppPagination"),N=u("AppFilter");return l(),g(h,null,[c(n,{class:"breadcrumb",arr:r.breadcrumbArr,title:s.title},null,8,["arr","title"]),a("main",ne,[a("section",oe,[c(o,{arr:i.paginatedData,contentCount:r.reviews.length},null,8,["arr","contentCount"]),p(c(Y,{reviews:r.reviews,totalPages:r.totalPages},null,8,["reviews","totalPages"]),[[x,r.reviews.length]])]),a("aside",le,[c(N,{ref:"childRef",filterByYear:i.filterByYear,searchReview:i.searchReview,sort:i.sort,filterByRating:i.filterByRating,type:s.type,years:s.years},null,8,["filterByYear","searchReview","sort","filterByRating","type","years"])])])],64)}const he={name:"AppVideos",props:["type","years","title"],inject:["json"],components:{AppContent:I,AppFilter:Q,AppPreloader:T,AppPagination:ae,Breadcrumb:D},data(){return{firstChannel:this.json.filter(t=>t.type==this.type),reviews:[],page:1,perPage:20,totalPages:1,gotoNumber:"",isLargeScreen:L("(min-width: 1024px)"),thumbnail:j,breadcrumbArr:[{title:"Home",link:"/"}]}},computed:{paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},...m(V,A,C)},methods:{sort(){this.reviews=this.reviews.reverse()},setTotalPages(){this.totalPages=Math.ceil(this.reviews.length/this.perPage)},filterByYear(t,e){this.reviews=this.json.filter(s=>s.type==this.type),this.pageStore.currentPage=1,this.$refs.childRef.$refs.inputRef.value="",this.yearStore.currentYear=t,t!=""&&(this.reviews=this.reviews.filter(s=>s.year==t)),this.type=="review"&&e!=""&&(this.reviews=this.reviews.filter(s=>s.rating==e)),this.setTotalPages()},filterByRating(t,e){if(this.reviews=this.json.filter(s=>s.type==this.type),this.pageStore.currentPage=1,this.$refs.childRef.$refs.inputRef.value="",e!==""&&(this.reviews=this.reviews.filter(s=>s.year==e)),this.ratingStore.currentRating=t,t===""){this.setTotalPages();return}this.reviews=this.reviews.filter(s=>s.rating==t),this.setTotalPages()},searchReview(t){if(this.reviews=this.json.filter(e=>e.type==this.type),this.pageStore.currentPage=1,this.yearStore.currentYear="",this.$refs.childRef.$refs.selectRef.value="",this.ratingStore.currentRating="",t.length==0){this.setTotalPages();return}this.reviews=this.reviews.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())),this.setTotalPages()},checkYears(){this.years.includes(Number(this.yearStore.currentYear))||(this.yearStore.currentYear="")}},created(){this.reviews=this.firstChannel,this.perPage=this.isLargeScreen?20:6,this.checkYears(),this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(e=>e.year==+this.yearStore.currentYear)),this.totalPages=Math.ceil(this.reviews.length/this.perPage),this.pageStore.currentPage=this.pageStore.currentPage>this.totalPages?1:this.pageStore.currentPage,this.page=this.pageStore.currentPage,this.pageStore.$subscribe((e,s)=>{this.page=s.currentPage});let t=[];this.reviews.map(e=>{let s={};s.albumTitle=e.albumTitle,s.artistName=e.artistName,s.theneedledrop=e.rating,s.pitchfork="",t.push(s)}),console.log(t)},mounted(){this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(t=>t.year==this.yearStore.currentYear)),this.ratingStore.currentRating!=""&&(this.reviews=this.reviews.filter(t=>t.rating==this.ratingStore.currentRating)),this.setTotalPages()}},fe=P(he,[["render",ge],["__scopeId","data-v-ed2ffcd9"]]);export{fe as A,ae as a,V as u};
