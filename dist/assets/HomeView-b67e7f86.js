import{A as L,B as j}from"./Breadcrumb-24a05cc3.js";import{o as p,c as m,a as S,_ as w,r as d,b as a,t as v,d as i,w as f,F as g,e as $,f as k,g as x,h as I,v as y,i as U,p as B,j as C}from"./index-ca05fd4e.js";import{A}from"./AppPreloader-060e5c6e.js";const R="/assets/vk-b764f8fc.png",E={class:"footer"},H=S('<ul class="list" data-v-0f2d1c87><a href="https://vk.com/mbdtfisstill6" target="_blank" data-v-0f2d1c87><li class="item" data-v-0f2d1c87><img class="image" src="'+R+'" data-v-0f2d1c87></li></a></ul><p class="text" data-v-0f2d1c87>Copyright Â© 2023 The Needle Drop</p>',2),T=[H];function N(e,c,s,o,t,r){return p(),m("footer",E,T)}const V={name:"AppFooter"},W=w(V,[["render",N],["__scopeId","data-v-0f2d1c87"]]),F={class:"header"},M={class:"header__title"},q={class:"content"},D=["src","alt","onLoad"],K={class:"content__title"};function P(e,c,s,o,t,r){const l=d("a-button"),_=d("RouterLink"),u=d("AppPreloader");return p(),m(g,null,[a("div",F,[a("h2",M,v(s.title),1),i(_,{to:`/${s.link}`},{default:f(()=>[i(l,{type:"dashed"},{default:f(()=>[I("Show all")]),_:1})]),_:1},8,["to"])]),a("div",q,[(p(!0),m(g,null,$(s.arr,(n,h)=>k((p(),x(_,{class:"content__element",to:`/videos/${n.id}`},{default:f(()=>[k(i(u,null,null,512),[[y,!n.imageShow]]),k(a("img",{class:"content__image",src:t.thumbnail(n.video),alt:n.title,onLoad:b=>n.imageShow=!0},null,40,D),[[y,n.imageShow]]),a("p",K,v(n.title),1)]),_:2},1032,["to"])),[[y,h<5]])),256))])],64)}const z={name:"HomeBlock",props:["title","link","arr"],components:{AppPreloader:A},data(){return{thumbnail:U}}},Q=w(z,[["render",P],["__scopeId","data-v-3980dcbf"]]),O=["src"],G={class:"carousel__left"},Y=["src"],Z={class:"carousel__right"},X={class:"carousel__links"},J=["href"];function ee(e,c,s,o,t,r){const l=d("RouterLink"),_=d("a-button"),u=d("a-carousel");return p(),x(u,{arrows:"","dots-class":"slick-dots slick-thumb"},{customPaging:f(n=>[a("a",null,[a("img",{src:r.getImgUrl(n.i)},null,8,O)])]),default:f(()=>[(p(!0),m(g,null,$(t.reviews,n=>(p(),m("div",{class:"carousel",key:n.id},[a("div",G,[a("img",{src:n.image},null,8,Y)]),a("div",Z,[i(l,{to:`/videos/${n.id}`},{default:f(()=>[a("h1",null,v(n.title),1)]),_:2},1032,["to"]),(p(!0),m(g,null,$(n.externalLinks,h=>(p(),m("div",X,[a("a",{href:h.source,target:"_blank"},[i(_,null,{default:f(()=>[I(v(h.title),1)]),_:2},1024)],8,J)]))),256))])]))),128))]),_:1})}const te={name:"CarouselApp",inject:["json"],data(){return{reviews:this.json.sort(()=>.5-Math.random()).filter(e=>e.type==="review").slice(0,10)}},methods:{getImgUrl(e){return this.reviews[e].image}}},oe=w(te,[["render",ee],["__scopeId","data-v-6121fb71"]]),se=e=>(B("data-v-3f596be9"),e=e(),C(),e),ne={class:"reviews"},re={class:"wtr"},ae={class:"ynr"},ce=se(()=>a("div",{class:"list-week"},null,-1));function le(e,c,s,o,t,r){const l=d("AppHeader"),_=d("Breadcrumb"),u=d("HomeBlock"),n=d("AppFooter"),h=d("a-back-top");return p(),m(g,null,[i(l),i(_,{class:"breadcrumb",title:"Home"}),a("main",null,[a("div",ne,[i(u,{title:"REVIEWS",link:"videos",arr:t.reviews},null,8,["arr"])]),a("div",re,[i(u,{title:"WTRs",link:"wtr",arr:t.wtr},null,8,["arr"])]),a("div",ae,[i(u,{title:"YUNOREVIEWS",link:"ynr",arr:t.ynr},null,8,["arr"])]),ce]),i(n),i(h)],64)}const ie={name:"HomeView",components:{AppHeader:L,Breadcrumb:j,AppFooter:W,HomeBlock:Q,AppPreloader:A,Carousel:oe},inject:["json"],data(){return{reviews:this.json.filter(e=>e.type=="review").slice(0,5),wtr:this.json.filter(e=>e.type=="weekly").slice(0,5),ynr:this.json.filter(e=>e.type=="YUNOREVIEW").slice(0,5)}},methods:{async fetchLastFm(e,c,s){fetch(`http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=9be755d7287c977402ce830fc6b09896&artist=${encodeURIComponent(c)}&album=${encodeURIComponent(s)}&format=json`).then(t=>t.json()).catch(t=>(console.error("Error:",t),"")).then(t=>{let l=t.album.image;return l[l.length-1]["#text"]}).catch(t=>(console.error("Error:",t),""))},async fetchLastFmImages(e,c,s){await fetch(`http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=e44382d410187390db28095da14f7f98&artist=${encodeURIComponent(c)}&album=${encodeURIComponent(s)}&format=json`).then(t=>t.json()).then(t=>{let l=t.album.image,_=l[l.length-1];console.log(e,_["#text"])})},splitMarkdownParagraphs(e){const c=e.split(/\n\s*\n|\n/);let s=[];return c.forEach(o=>{let t=o.split(" / "),r={};r.id=t[0],r.tags=t[1],s.push(r)}),s},getSpotifyLink(e,c,s){const o="BQBAspwrTtcoSz8Q3eFdU0bWP-ayX-TuV-sMLh-baVdxzFO5iwIB_DLrrFvuF6qg-LRLjXUDmgSCEtqSGbVLepJY9xi7ie6WHZ8-4nxoZzYb1PeL3I7Zwr6DLI0Q7QeN-UPyj3ga2vYgbtDnOp4UzVH56Sh6v2ahvgC-qu0CwANaG5t065zeovXlBNbgTkOiDqQiM61h1wjAmL5TC7_IivBMZx3ihbAYphU5cZikq_Kjvn6bZiWgQ2Gj3Sip9tiKE9U-GBrqAkoWRiDvHINlu6Bw",t=`album:${encodeURIComponent(c)} artist:${encodeURIComponent(s)}`;fetch(`https://api.spotify.com/v1/search?q=${t}&type=album`,{headers:{Authorization:`Bearer ${o}`}}).then(r=>r.json()).then(r=>{const l=r.albums.items;if(l.length>0){const u=l[0].external_urls.spotify;console.log(e,u)}else console.log("No album found with the specified title and artist")}).catch(r=>{console.error("Error retrieving album:",r)})},getAppleMusicLink(){this.json.forEach(e=>{if(e.type!=="review"||e.externalLinks.length>1)return;const c=`${e.albumTitle} ${e.artistName}`,s=`https://itunes.apple.com/search?term=${encodeURIComponent(c)}&entity=album&limit=1`;fetch(s).then(o=>o.json()).then(o=>{if(o.results&&o.results.length>0){const r=o.results[0].collectionViewUrl;console.log(e.id,r)}else return null}).catch(o=>(console.error("Error:",o),null))})},pushAppleMusicLink(){console.log(this.json)},pushImages(){console.log(this.json)},async getMediaLinks(e,c,s){try{const o=`site:music.apple.com ${c} ${s}`,t=`https://www.google.com/search?q=${encodeURIComponent(o)}`,l=await(await fetch(t,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Safari/537.36"}})).text(),n=new DOMParser().parseFromString(l,"text/html").querySelectorAll("div.g");if(!n.length)return[];const b=n[0].querySelector("a").href;b&&b.includes("apple")&&console.log(e,b)}catch(o){return console.error("Error:",o.message),[]}},async fetchData(e){const s=await(await fetch(e,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Safari/537.36"}})).text(),o=window.open();o.document.open(),o.document.write(s),o.document.close(),console.log(o.document.documentElement.textContent)}},async created(){}},pe=w(ie,[["render",le],["__scopeId","data-v-3f596be9"]]);export{pe as default};
