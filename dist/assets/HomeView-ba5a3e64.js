import{A as k,B as v}from"./Breadcrumb-fbd41e17.js";import{o as _,c as h,a as $,_ as f,r as p,b as m,t as x,d as c,w as g,F as w,e as A,p as I,f as C}from"./index-b795a212.js";import{A as j,a as y}from"./AppContent-8c37f178.js";const L="/assets/vk-b764f8fc.png",B={class:"footer"},U=$('<ul class="list" data-v-0f2d1c87><a href="https://vk.com/mbdtfisstill6" target="_blank" data-v-0f2d1c87><li class="item" data-v-0f2d1c87><img class="image" src="'+L+'" data-v-0f2d1c87></li></a></ul><p class="text" data-v-0f2d1c87>Copyright Â© 2023 The Needle Drop</p>',2),S=[U];function H(e,r,s,t,o,n){return _(),h("footer",B,S)}const R={name:"AppFooter"},E=f(R,[["render",H],["__scopeId","data-v-0f2d1c87"]]),N={class:"header"},T={class:"header__title"};function F(e,r,s,t,o,n){const a=p("a-button"),l=p("RouterLink"),i=p("AppContent");return _(),h(w,null,[m("div",N,[m("h2",T,x(s.title),1),c(l,{to:`/${s.link}`},{default:g(()=>[c(a,{type:"dashed"},{default:g(()=>[A("Show all")]),_:1})]),_:1},8,["to"])]),c(i,{arr:s.arr,contentCount:"5"},null,8,["arr"])],64)}const V={name:"HomeBlock",props:["title","link","arr"],components:{AppContent:j,AppPreloader:y}},W=f(V,[["render",F],["__scopeId","data-v-0fc95c39"]]),M=e=>(I("data-v-473bf700"),e=e(),C(),e),q={class:"reviews"},D={class:"wtr"},K={class:"ynr"},z=M(()=>m("div",{class:"list-week"},null,-1));function Q(e,r,s,t,o,n){const a=p("AppHeader"),l=p("Breadcrumb"),i=p("HomeBlock"),d=p("AppFooter"),b=p("a-back-top");return _(),h(w,null,[c(a),c(l,{class:"breadcrumb",title:"Home"}),m("main",null,[m("div",q,[c(i,{title:"REVIEWS",link:"videos",arr:o.reviews},null,8,["arr"])]),m("div",D,[c(i,{title:"WTRs",link:"wtr",arr:o.wtr},null,8,["arr"])]),m("div",K,[c(i,{title:"YNRs",link:"ynr",arr:o.ynr},null,8,["arr"])]),z]),c(d),c(b)],64)}const G={name:"HomeView",components:{AppHeader:k,Breadcrumb:v,AppFooter:E,HomeBlock:W,AppPreloader:y},inject:["json"],data(){return{reviews:this.json.filter(e=>e.type=="review").slice(0,5),wtr:this.json.filter(e=>e.type=="weekly").slice(0,5),ynr:this.json.filter(e=>e.type=="YUNOREVIEW").slice(0,5)}},methods:{async fetchLastFm(e,r,s){fetch(`http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=9be755d7287c977402ce830fc6b09896&artist=${encodeURIComponent(r)}&album=${encodeURIComponent(s)}&format=json`).then(o=>o.json()).catch(o=>(console.error("Error:",o),"")).then(o=>{let a=o.album.image;return a[a.length-1]["#text"]}).catch(o=>(console.error("Error:",o),""))},async fetchLastFmImages(e,r,s){await fetch(`http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=e44382d410187390db28095da14f7f98&artist=${encodeURIComponent(r)}&album=${encodeURIComponent(s)}&format=json`).then(o=>o.json()).then(o=>{let a=o.album.image,l=a[a.length-1];console.log(e,l["#text"])})},splitMarkdownParagraphs(e){const r=e.split(/\n\s*\n|\n/);let s=[];return r.forEach(t=>{let o=t.split(" / "),n={};n.id=o[0],n.tags=o[1],s.push(n)}),s},getSpotifyLink(e,r,s){const t="BQBAspwrTtcoSz8Q3eFdU0bWP-ayX-TuV-sMLh-baVdxzFO5iwIB_DLrrFvuF6qg-LRLjXUDmgSCEtqSGbVLepJY9xi7ie6WHZ8-4nxoZzYb1PeL3I7Zwr6DLI0Q7QeN-UPyj3ga2vYgbtDnOp4UzVH56Sh6v2ahvgC-qu0CwANaG5t065zeovXlBNbgTkOiDqQiM61h1wjAmL5TC7_IivBMZx3ihbAYphU5cZikq_Kjvn6bZiWgQ2Gj3Sip9tiKE9U-GBrqAkoWRiDvHINlu6Bw",o=`album:${encodeURIComponent(r)} artist:${encodeURIComponent(s)}`;fetch(`https://api.spotify.com/v1/search?q=${o}&type=album`,{headers:{Authorization:`Bearer ${t}`}}).then(n=>n.json()).then(n=>{const a=n.albums.items;if(a.length>0){const i=a[0].external_urls.spotify;console.log(e,i)}else console.log("No album found with the specified title and artist")}).catch(n=>{console.error("Error retrieving album:",n)})},getAppleMusicLink(){this.json.forEach(e=>{if(e.type!=="review"||e.externalLinks.length>1)return;const r=`${e.albumTitle} ${e.artistName}`,s=`https://itunes.apple.com/search?term=${encodeURIComponent(r)}&entity=album&limit=1`;fetch(s).then(t=>t.json()).then(t=>{if(t.results&&t.results.length>0){const n=t.results[0].collectionViewUrl;console.log(e.id,n)}else return null}).catch(t=>(console.error("Error:",t),null))})},pushAppleMusicLink(){console.log(this.json)},pushImages(){console.log(this.json)},async getMediaLinks(e,r,s){try{const t=`site:music.apple.com ${r} ${s}`,o=`https://www.google.com/search?q=${encodeURIComponent(t)}`,a=await(await fetch(o,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Safari/537.36"}})).text(),d=new DOMParser().parseFromString(a,"text/html").querySelectorAll("div.g");if(!d.length)return[];const u=d[0].querySelector("a").href;u&&u.includes("apple")&&console.log(e,u)}catch(t){return console.error("Error:",t.message),[]}},async fetchData(e){const s=await(await fetch(e,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Safari/537.36"}})).text(),t=window.open();t.document.open(),t.document.write(s),t.document.close(),console.log(t.document.documentElement.textContent)}},async created(){}},Z=f(G,[["render",Q],["__scopeId","data-v-473bf700"]]);export{Z as default};
