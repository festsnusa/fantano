import{A as F,a as C}from"./AppFooter-5ce84ec7.js";import{j as y,o as l,c,e as g,k as V,a,l as w,F as p,d,t as v,p as I,g as D,m,_ as S,r as u,b as _,f as L,w as T,v as f,n as q}from"./index-7b570708.js";import{A as j}from"./AppPreloader-7843da90.js";import{j as h}from"./main-channel-7ff1434d.js";const P=y("year",{state:()=>({currentYear:""}),persist:{storage:sessionStorage}}),b=e=>(I("data-v-0cb045dd"),e=e(),D(),e),M={class:"search"},N=b(()=>a("option",{value:""},"Filter by year",-1)),O=["value"],H=b(()=>a("option",{value:""},"Filter by rating",-1)),U=["value"];function E(e,t,o,R,i,n){return l(),c("div",M,[g(a("input",{class:"search__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>i.text=r),onInput:t[1]||(t[1]=r=>o.searchReview(i.text)),placeholder:"Search for a review..."},null,544),[[V,i.text]]),g(a("select",{class:"search__select","onUpdate:modelValue":t[2]||(t[2]=r=>i.year=r),name:"select",onChange:t[3]||(t[3]=(...r)=>o.filterByYear&&o.filterByYear(...r))},[N,(l(!0),c(p,null,d(i.years,r=>(l(),c("option",{value:r},v(r),9,O))),256))],544),[[w,i.year]]),g(a("select",{class:"search__select_rating","onUpdate:modelValue":t[4]||(t[4]=r=>i.rating=r),name:"select_rating",onChange:t[5]||(t[5]=(...r)=>o.filterByRating&&o.filterByRating(...r))},[H,(l(!0),c(p,null,d(i.ratings,r=>(l(),c("option",{value:r},v(r),9,U))),256))],544),[[w,i.rating]])])}const z={name:"AppFilter",props:["filterByYear","searchReview","filterByRating"],data(){return{text:"",year:"",years:[2023,2022,2021,2020,2019,2018,2017,2016,2015,2014,2013,2012,2011,2010],rating:"",ratings:[10,9,8,7,6,5,4,3,2,1,0,"NOT GOOD","NOT BAD","-"]}},computed:{...m(P)},mounted(){this.year=this.yearStore.currentYear,this.yearStore.$subscribe((e,t)=>{this.year=t.currentYear})}},G=S(z,[["render",E],["__scopeId","data-v-0cb045dd"]]),J=y("page",{state:()=>({currentPage:1}),persist:{storage:sessionStorage}}),K=y("rating",{state:()=>({currentRating:""}),persist:{storage:sessionStorage}}),Q={class:"reviews"},W={class:"reviews__left"},X={class:"reviews__content"},Z=["src","alt","onLoad"],$={class:"review__title"},ee={class:"reviews__right"},te={class:"pagination"},re=["onClick"];function se(e,t,o,R,i,n){const r=u("AppHeader"),B=u("AppPreloader"),x=u("RouterLink"),A=u("AppFilter"),Y=u("AppFooter");return l(),c(p,null,[_(r,{currentIndex:1}),a("div",Q,[a("section",W,[a("div",X,[(l(!0),c(p,null,d(n.paginatedData,(s,k)=>(l(),L(x,{class:"review",key:k,to:`/review/${s.id}`},{default:T(()=>[g(_(B,null,null,512),[[f,!s.imageShow]]),g(a("img",{class:"review__image",src:n.getThumbnail(s.video),alt:s.title,onLoad:ie=>s.imageShow=!0},null,40,Z),[[f,s.imageShow]]),a("p",$,v(s.title),1)]),_:2},1032,["to"]))),128))])]),a("aside",ee,[_(A,{filterByYear:n.filterByYear,searchReview:n.searchReview,filterByRating:n.filterByRating},null,8,["filterByYear","searchReview","filterByRating"])])]),a("div",te,[a("button",{class:"pagination__prev",onClick:t[0]||(t[0]=(...s)=>n.backPage&&n.backPage(...s))},"«"),(l(!0),c(p,null,d(Math.ceil(i.reviews.length/i.perPage),s=>(l(),c("button",{class:q(["pagination__button",{active:s==i.page}]),key:s,onClick:()=>n.goToPage(s)},v(s),11,re))),128)),a("button",{class:"pagination__next",onClick:t[1]||(t[1]=(...s)=>n.nextPage&&n.nextPage(...s))},"»")]),_(Y)],64)}const ae={name:"ReviewsView",components:{AppHeader:F,AppFooter:C,AppFilter:G,AppPreloader:j},data(){return{reviews:h.filter(e=>e.type=="review"),page:1,perPage:16}},computed:{paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},...m(J,P,K)},methods:{getThumbnail(e){return`http://img.youtube.com/vi/${this.getVideoID(e)}/0.jpg`},getVideoID(e){let t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,o=e.match(t);return o&&o[7].length==11?o[7]:!1},nextPage(){this.page!==Math.ceil(this.reviews.length/this.perPage)&&(this.pageStore.currentPage+=1)},backPage(){this.page!==1&&(this.pageStore.currentPage-=1)},goToPage(e){this.pageStore.currentPage=e},filterByYear(){this.reviews=h.filter(e=>e.type=="review"),this.pageStore.currentPage=1,document.querySelector(".search__input").value="",this.yearStore.currentYear=document.querySelector(".search__select").value,this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(e=>e.year==this.yearStore.currentYear))},filterByRating(){this.reviews=h.filter(e=>e.type=="review"),this.pageStore.currentPage=1,document.querySelector(".search__input").value="",this.ratingStore.currentRating=document.querySelector(".search__select_rating").value,this.ratingStore.currentRating!=""&&(this.reviews=this.reviews.filter(e=>e.rating==this.ratingStore.currentRating))},searchReview(e){this.reviews=h.filter(t=>t.type=="review"),this.pageStore.currentPage=1,document.querySelector(".search__select").value="",e.length!=0&&(this.reviews=this.reviews.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())))}},created(){this.page=this.pageStore.currentPage,this.pageStore.$subscribe((e,t)=>{this.page=t.currentPage})},mounted(){this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(e=>e.year==this.yearStore.currentYear))}},ue=S(ae,[["render",se],["__scopeId","data-v-e9bacd91"]]);export{ue as default};
