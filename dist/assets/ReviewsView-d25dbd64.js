import{A as I,a as V}from"./AppFooter-57aea98b.js";import{j as w,o as l,c,e as p,k as D,a,l as y,F as g,d,t as v,p as m,g as S,m as P,_ as R,r as u,b as _,f as L,w as T,v as f,n as q}from"./index-63fc1ddc.js";import{A as j}from"./AppPreloader-ecf56d06.js";import{j as h}from"./main-channel-aa93630e.js";const b=w("year",{state:()=>({currentYear:""}),persist:!0}),B=e=>(m("data-v-2df80391"),e=e(),S(),e),M={class:"search"},N=B(()=>a("option",{value:""},"Filter by year",-1)),O=["value"],H=B(()=>a("option",{value:""},"Filter by rating",-1)),U=["value"];function E(e,t,o,x,i,n){return l(),c("div",M,[p(a("input",{class:"search__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>i.text=r),onInput:t[1]||(t[1]=r=>o.searchReview(i.text)),placeholder:"Search for a review..."},null,544),[[D,i.text]]),p(a("select",{class:"search__select","onUpdate:modelValue":t[2]||(t[2]=r=>i.year=r),name:"select",onChange:t[3]||(t[3]=(...r)=>o.filterByYear&&o.filterByYear(...r))},[N,(l(!0),c(g,null,d(i.years,r=>(l(),c("option",{value:r},v(r),9,O))),256))],544),[[y,i.year]]),p(a("select",{class:"search__select_rating","onUpdate:modelValue":t[4]||(t[4]=r=>i.rating=r),name:"select_rating",onChange:t[5]||(t[5]=(...r)=>o.filterByRating&&o.filterByRating(...r))},[H,(l(!0),c(g,null,d(i.ratings,r=>(l(),c("option",{value:r},v(r),9,U))),256))],544),[[y,i.rating]])])}const z={name:"AppFilter",props:["filterByYear","searchReview","filterByRating"],data(){return{text:"",year:"",years:[2023,2022,2021,2020,2019,2018,2017,2016,2015,2014,2013,2012,2011,2010],rating:"",ratings:[10,9,8,7,6,5,4,3,2,1,0,"NOT GOOD","NOT BAD","-"]}},computed:{...P(b)},mounted(){this.year=this.yearStore.currentYear,this.yearStore.$subscribe((e,t)=>{this.year=t.currentYear})}},G=R(z,[["render",E],["__scopeId","data-v-2df80391"]]),J=w("page",{state:()=>({currentPage:1}),persist:!0}),K=w("rating",{state:()=>({currentRating:""}),persist:!0}),Q=e=>(m("data-v-d6434475"),e=e(),S(),e),W={class:"reviews"},X={class:"reviews__left"},Z=Q(()=>a("div",{class:"reviews__header"},[a("span",{class:"reviews__title"},"Reviews")],-1)),$={class:"reviews__content"},ee=["src","alt","onLoad"],te={class:"review__title"},re={class:"reviews__right"},se={class:"pagination"},ae=["onClick"];function ie(e,t,o,x,i,n){const r=u("AppHeader"),A=u("AppPreloader"),Y=u("RouterLink"),k=u("AppFilter"),F=u("AppFooter");return l(),c(g,null,[_(r,{currentIndex:1}),a("div",W,[a("section",X,[Z,a("div",$,[(l(!0),c(g,null,d(n.paginatedData,(s,C)=>(l(),L(Y,{class:"review",key:C,to:`/review/${s.id}`},{default:T(()=>[p(_(A,null,null,512),[[f,!s.imageShow]]),p(a("img",{class:"review__image",src:n.getThumbnail(s.video),alt:s.title,onLoad:oe=>s.imageShow=!0},null,40,ee),[[f,s.imageShow]]),a("p",te,v(s.title),1)]),_:2},1032,["to"]))),128))])]),a("aside",re,[_(k,{filterByYear:n.filterByYear,searchReview:n.searchReview,filterByRating:n.filterByRating},null,8,["filterByYear","searchReview","filterByRating"])])]),a("div",se,[a("button",{class:"pagination__prev",onClick:t[0]||(t[0]=(...s)=>n.backPage&&n.backPage(...s))},"«"),(l(!0),c(g,null,d(Math.ceil(i.reviews.length/i.perPage),s=>(l(),c("button",{class:q(["pagination__button",{active:s==i.page}]),key:s,onClick:()=>n.goToPage(s)},v(s),11,ae))),128)),a("button",{class:"pagination__next",onClick:t[1]||(t[1]=(...s)=>n.nextPage&&n.nextPage(...s))},"»")]),_(F)],64)}const ne={name:"ReviewsView",components:{AppHeader:I,AppFooter:V,AppFilter:G,AppPreloader:j},data(){return{reviews:h.filter(e=>e.type=="review"),page:1,perPage:15}},computed:{paginatedData(){return this.reviews.slice((this.page-1)*this.perPage,this.page*this.perPage)},...P(J,b,K)},methods:{getThumbnail(e){return`http://img.youtube.com/vi/${this.getVideoID(e)}/0.jpg`},getVideoID(e){let t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,o=e.match(t);return o&&o[7].length==11?o[7]:!1},nextPage(){this.page!==Math.ceil(this.reviews.length/this.perPage)&&(this.pageStore.currentPage+=1)},backPage(){this.page!==1&&(this.pageStore.currentPage-=1)},goToPage(e){this.pageStore.currentPage=e},filterByYear(){this.reviews=h.filter(e=>e.type=="review"),this.pageStore.currentPage=1,document.querySelector(".search__input").value="",this.yearStore.currentYear=document.querySelector(".search__select").value,this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(e=>e.year==this.yearStore.currentYear))},filterByRating(){this.reviews=h.filter(e=>e.type=="review"),this.pageStore.currentPage=1,document.querySelector(".search__input").value="",this.ratingStore.currentRating=document.querySelector(".search__select_rating").value,this.ratingStore.currentRating!=""&&(this.reviews=this.reviews.filter(e=>e.rating==this.ratingStore.currentRating))},searchReview(e){this.reviews=h.filter(t=>t.type=="review"),this.pageStore.currentPage=1,document.querySelector(".search__select").value="",e.length!=0&&(this.reviews=this.reviews.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())))}},created(){this.page=this.pageStore.currentPage,this.pageStore.$subscribe((e,t)=>{this.page=t.currentPage})},mounted(){this.yearStore.currentYear!=""&&(this.reviews=this.reviews.filter(e=>e.year==this.yearStore.currentYear))}},ge=R(ne,[["render",ie],["__scopeId","data-v-d6434475"]]);export{ge as default};
