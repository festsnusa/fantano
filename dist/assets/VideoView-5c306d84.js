import{B as R,A as C}from"./Breadcrumb-e84e705e.js";import{_ as h,o as i,c as a,b as u,n as N,r as c,d as _,g as z,h as B,i as b,v as w,F as v,j as k,w as x,e as $,t as g,k as y,l as j,m as M,q as P,s as V}from"./index-2e540f26.js";import{u as S}from"./index-fc140a51.js";const A={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},H={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:t=>["horizontal","vertical","both","none"].includes(t)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return A[this.type]||A.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},U=["width","height","viewBox"],Y=["d"];function K(t,e,n,l,r,o){return i(),a("svg",{width:o.sizeValue,height:o.sizeValue,viewBox:o.viewboxValue,style:N(o.styles)},[u("path",{d:n.path},null,8,Y)],12,U)}const F=h(H,[["render",K],["__scopeId","data-v-76aa6b74"]]);var W="M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z";const q={class:"stars"};function O(t,e,n,l,r,o){const s=c("SvgIcon");return i(),a("div",q,[_(s,{type:"mdi",path:r.path},null,8,["path"])])}const D={name:"ReviewStar",components:{SvgIcon:F},data(){return{path:W}}},Q=h(D,[["render",O],["__scopeId","data-v-cd040290"]]),Z={name:"AppToggle",props:["toggleValue","checked"],data(){return{checkedFlag:this.checked}}};function J(t,e,n,l,r,o){const s=c("a-switch");return i(),a("div",null,[_(s,{checked:r.checkedFlag,"onUpdate:checked":e[0]||(e[0]=d=>r.checkedFlag=d),"checked-children":"EN","un-checked-children":"RU",onChange:e[1]||(e[1]=d=>n.toggleValue(r.checkedFlag))},null,8,["checked"])])}const G=h(Z,[["render",J]]),X={name:"VKPlaylist",props:{playlistUrl:{type:String,required:!0},width:{type:Number,default:300},height:{type:Number,default:400}},setup(t){const e=z(!1),n=s=>{const d=/\/music\/playlist\/(-?\d+)_(\w+)/,p=/\/music\/album\/(-?\d+)_(\d+)_(\w+)/,m=s.match(d),f=s.match(p);return m&&m.length===3?{ownerId:m[1],playlistId:m[2]}:f&&f.length===4?{ownerId:f[1],playlistId:`${f[2]}_${f[3]}`}:{ownerId:null,playlistId:null}},{ownerId:l,playlistId:r}=n(t.playlistUrl);B(()=>{if(e.value)o();else{const s=document.createElement("script");s.src="https://vk.com/js/api/openapi.js?168",s.async=!0,s.defer=!0,document.head.appendChild(s),s.onload=()=>{e.value=!0,o()}}});const o=s=>{VK.Widgets.Playlist("vkPlaylist",l,r,t.width,t.height,{mode:4})};return{embedPlaylist:o}}},ee={id:"vkPlaylist",ref:"vkPlaylist"};function te(t,e,n,l,r,o){return i(),a("div",ee,null,512)}const ne=h(X,[["render",te]]),re={class:"video"},se=["src"],ie={class:"external-links"},oe=["onClick"],le={class:"player"},ce=["src"];function ae(t,e,n,l,r,o){const s=c("a-button"),d=c("VKPlaylist");return i(),a(v,null,[u("div",re,[u("iframe",{src:r.video(n.current.video),rel:"0",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,se)]),b(u("ul",ie,[(i(!0),a(v,null,k(n.current.externalLinks,p=>(i(),a("li",{onClick:m=>o.changePlayer(p.title)},[_(s,null,{default:x(()=>[$(g(p.title),1)]),_:2},1024)],8,oe))),256))],512),[[w,n.current.externalLinks]]),b(u("div",le,[(i(!0),a(v,null,k(n.current.externalLinks,p=>(i(),a("div",null,[p.title==="VK"?(i(),y(d,{key:0,playlistUrl:p.source},null,8,["playlistUrl"])):b((i(),a("iframe",{key:1,class:"iframe",style:{"border-radius":"12px"},src:o.toEmbedLink,width:"100%",height:"452",frameBorder:"0",allowfullscreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"},null,8,ce)),[[w,r.player==p.title]])]))),256))],512),[[w,n.current.externalLinks]])],64)}const ue={name:"VideoSideSection",props:["current"],components:{VKPlaylist:ne},data(){var t;return{video:j,player:(t=this.current.externalLinks)!=null&&t.length?this.current.externalLinks[0].title:"spotify"}},computed:{toEmbedLink(){if(this.player.toLowerCase()==="spotify"){let t=this.current.externalLinks.find(e=>e.title.toLowerCase()==="spotify");return t==null?"":t.source.includes("/playlist/")?t.source.replace("/playlist/","/embed/playlist/"):t.source.replace("/album/","/embed/album/")}else if(this.player.toLowerCase()==="am"){let t=this.current.externalLinks.find(e=>e.title.toLowerCase()==="am");return t==null?"":t.source.replace("music.apple.com","embed.music.apple.com")}else{let t=this.current.externalLinks.find(e=>e.title.toLowerCase()===this.player.toLowerCase());return t==null?"":t.source}}},methods:{changePlayer(t){this.player=t}}},I=h(ue,[["render",ae],["__scopeId","data-v-fdd18ab7"]]);function de(t,e,n,l,r,o){const s=c("VideoSideSection"),d=c("a-affix");return i(),y(d,{"offset-top":r.top},{default:x(()=>[_(s,{current:n.current,transformYouTubeLink:n.transformYouTubeLink},null,8,["current","transformYouTubeLink"])]),_:1},8,["offset-top"])}const pe={name:"AppAffix",props:["current","transformYouTubeLink"],components:{VideoSideSection:I},data(){return{top:20}}},_e=h(pe,[["render",de]]),he={class:"review"},me={class:"review__right"},fe={class:"review__header"},ve={class:"review__title"},ye={class:"tags"},be={class:"tag"},we={class:"text-field multiline"},ge={class:"markdown__ru"},ke={class:"markdown__en"},xe={class:"review__left"};function Le(t,e,n,l,r,o){const s=c("Breadcrumb"),d=c("a-button"),p=c("RouterLink"),m=c("Toggle"),f=c("ReviewStar"),T=c("Affix"),E=c("VideoSideSection");return i(),a(v,null,[_(s,{class:"breadcrumb",arr:r.breadcrumbArr,title:r.current.title},null,8,["arr","title"]),u("main",he,[u("div",me,[u("div",fe,[u("h1",ve,g(r.current.title)+" ("+g(r.current.year)+")",1),u("ul",ye,[(i(!0),a(v,null,k(r.current.tags,L=>(i(),a("li",be,[_(p,{to:`/tags/${L.toLowerCase()}`},{default:x(()=>[_(d,null,{default:x(()=>[$(g(L.toLowerCase()),1)]),_:2},1024)]),_:2},1032,["to"])]))),256))]),r.filesLoaded==2?(i(),y(m,{key:0,class:"toggle",toggleValue:o.toggleValue,checked:r.en},null,8,["toggleValue","checked"])):M("",!0),(i(!0),a(v,null,k(r.current.rating,L=>b((i(),y(f,null,null,512)),[[w,!isNaN(r.current.rating)]])),256))]),u("div",we,[b(u("div",ge,null,512),[[w,!r.en]]),b(u("div",ke,null,512),[[w,r.en]])])]),u("div",xe,[r.isAffix?(i(),y(T,{key:0,current:r.current},null,8,["current"])):(i(),y(E,{key:1,current:r.current},null,8,["current"]))])])],64)}const Se={name:"AppVideo",components:{ReviewStar:Q,Toggle:G,Affix:_e,VideoSideSection:I,Breadcrumb:R},inject:["json"],data(){return{arr:this.json.filter(t=>t.type=="review"),current:null,en:!1,isLargeScreen:S("(min-width: 1024px)"),textEn:"",textRu:"",filesLoaded:0,isAffix:S("(min-width: 1300px)"),breadcrumbArr:[{title:"Home",link:"/"}]}},computed:{calculateWidth(){return this.isLargeScreen?640:400}},methods:{toggleValue(t){this.en=t},updateScreen(){this.isLargeScreen=S("(min-width: 1024px)")},addBreadcrumbLink(t){let e={};t=="review"?(e.title="Reviews",e.link="/videos",this.breadcrumbArr.push(e)):t=="weekly"?(e.title="Weekly Track Roundups",e.link="/wtr",this.breadcrumbArr.push(e)):t=="YUNOREVIEW"?(e.title="YUNOREVIEWs",e.link="/ynr",this.breadcrumbArr.push(e)):t=="TRACK REVIEW"?(e.title="TRACK REVIEW",e.link="/trkrvws",this.breadcrumbArr.push(e)):t=="list-week"?(e.title="list week",e.link="/list-week",this.breadcrumbArr.push(e)):t=="podcast"?(e.title="podcasts",e.link="/podcasts",this.breadcrumbArr.push(e)):t=="vinyl"?(e.title="vinyls",e.link="/vinyls",this.breadcrumbArr.push(e)):t=="other"&&(e.title="other",e.link="/other",this.breadcrumbArr.push(e))},stringToHTML(t){let e=document.createElement("div");return e.innerHTML=t,e},async getYoutubeCaption(){const t="AIzaSyCetglNoZRO6IU3JBIhlmIneiHFef2Q4tM",n=`https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${P(this.current.video)}&key=${t}`;await fetch(n).then(l=>{if(!l.ok)throw new Error("Network response was not ok");return l.json()}).then(l=>{const o=l.items[0].snippet.description;this.textEn=o,document.querySelector(".markdown__en").innerHTML=this.textEn,this.en=!0,this.filesLoaded++}).catch(l=>{console.error("Error fetching video description:",l)})}},async created(){this.current=this.json.filter(n=>n.id==this.$route.params.video)[0],this.addBreadcrumbLink(this.current.type),V(`${this.$route.params.video}-en`).then(n=>{n!==""?(this.textEn=n,this.en=!0,this.filesLoaded++,document.querySelector(".markdown__en").innerHTML=this.textEn):this.getYoutubeCaption()}).catch(n=>{console.log(n)}),V(`${this.$route.params.video}-ru`).then(n=>{if(n!=="")this.textRu=n,this.en=!1,this.filesLoaded++,document.querySelector(".markdown__ru").innerHTML=this.textRu;else throw new Error("Not found")}).catch(n=>{console.log(n)})}},Ve=h(Se,[["render",Le],["__scopeId","data-v-21f8b289"]]);function Ae(t,e,n,l,r,o){const s=c("AppHeader"),d=c("AppVideo"),p=c("a-back-top");return i(),a(v,null,[_(s),_(d),_(p)],64)}const $e={components:{AppHeader:C,AppVideo:Ve}},Re=h($e,[["render",Ae]]);export{Re as default};
