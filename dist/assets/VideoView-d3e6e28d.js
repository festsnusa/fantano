import{B as E,A as C}from"./Breadcrumb-851cc565.js";import{_ as h,o as s,c,b as a,n as N,r as l,d as p,i as z,j as B,k as b,v as g,F as v,f as k,w as x,e as $,t as w,l as y,m as P,q as j,s as V,h as M}from"./index-0ddffbae.js";import{u as S}from"./index-849c54be.js";const A={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},H={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:t=>["horizontal","vertical","both","none"].includes(t)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return A[this.type]||A.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},Y=["width","height","viewBox"],K=["d"];function U(t,e,r,_,n,o){return s(),c("svg",{width:o.sizeValue,height:o.sizeValue,viewBox:o.viewboxValue,style:N(o.styles)},[a("path",{d:r.path},null,8,K)],12,Y)}const F=h(H,[["render",U],["__scopeId","data-v-76aa6b74"]]);var W="M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z";const q={class:"stars"};function O(t,e,r,_,n,o){const i=l("SvgIcon");return s(),c("div",q,[p(i,{type:"mdi",path:n.path},null,8,["path"])])}const D={name:"ReviewStar",components:{SvgIcon:F},data(){return{path:W}}},Q=h(D,[["render",O],["__scopeId","data-v-cd040290"]]),Z={name:"AppToggle",props:["toggleValue","checked"],data(){return{checkedFlag:this.checked}}};function G(t,e,r,_,n,o){const i=l("a-switch");return s(),c("div",null,[p(i,{checked:n.checkedFlag,"onUpdate:checked":e[0]||(e[0]=u=>n.checkedFlag=u),"checked-children":"EN","un-checked-children":"RU",onChange:e[1]||(e[1]=u=>r.toggleValue(n.checkedFlag))},null,8,["checked"])])}const J=h(Z,[["render",G]]),X={name:"VKPlaylist",props:{playlistUrl:{type:String,required:!0},width:{type:Number,default:300},height:{type:Number,default:400}},setup(t){const e=z(!1),r=i=>{const u=/\/music\/playlist\/(-?\d+)_(\w+)/,d=/\/music\/album\/(-?\d+)_(\d+)_(\w+)/,m=i.match(u),f=i.match(d);return m&&m.length===3?{ownerId:m[1],playlistId:m[2]}:f&&f.length===4?{ownerId:f[1],playlistId:`${f[2]}_${f[3]}`}:{ownerId:null,playlistId:null}},{ownerId:_,playlistId:n}=r(t.playlistUrl);B(()=>{if(e.value)o();else{const i=document.createElement("script");i.src="https://vk.com/js/api/openapi.js?168",i.async=!0,i.defer=!0,document.head.appendChild(i),i.onload=()=>{e.value=!0,o()}}});const o=()=>{VK.Widgets.Playlist("vkPlaylist",_,n,t.width,t.height,{mode:4})};return{embedPlaylist:o}}},ee={id:"vkPlaylist",ref:"vkPlaylist"};function te(t,e,r,_,n,o){return s(),c("div",ee,null,512)}const ne=h(X,[["render",te]]),re={class:"video"},se=["src"],ie={class:"external-links"},oe=["onClick"],le={class:"player"},ce=["src"];function ae(t,e,r,_,n,o){const i=l("a-button"),u=l("VKPlaylist");return s(),c(v,null,[a("div",re,[a("iframe",{src:n.video(r.current.video),rel:"0",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,se)]),b(a("ul",ie,[(s(!0),c(v,null,k(r.current.externalLinks,d=>(s(),c("li",{onClick:m=>o.changePlayer(d.title)},[p(i,null,{default:x(()=>[$(w(d.title),1)]),_:2},1024)],8,oe))),256))],512),[[g,r.current.externalLinks]]),b(a("div",le,[(s(!0),c(v,null,k(r.current.externalLinks,d=>(s(),c("div",null,[d.title==="VK"?(s(),y(u,{key:0,playlistUrl:d.source},null,8,["playlistUrl"])):b((s(),c("iframe",{key:1,class:"iframe",style:{"border-radius":"12px"},src:o.toEmbedLink,width:"100%",height:"452",frameBorder:"0",allowfullscreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"},null,8,ce)),[[g,n.player==d.title]])]))),256))],512),[[g,r.current.externalLinks]])],64)}const ue={name:"VideoSideSection",props:["current"],components:{VKPlaylist:ne},data(){var t;return{video:P,player:(t=this.current.externalLinks)!=null&&t.length?this.current.externalLinks[0].title:"spotify"}},computed:{toEmbedLink(){if(this.player.toLowerCase()==="spotify"){let t=this.current.externalLinks.find(e=>e.title.toLowerCase()==="spotify");return t==null?"":t.source.includes("/playlist/")?t.source.replace("/playlist/","/embed/playlist/"):t.source.replace("/album/","/embed/album/")}else if(this.player.toLowerCase()==="am"){let t=this.current.externalLinks.find(e=>e.title.toLowerCase()==="am");return t==null?"":t.source.replace("music.apple.com","embed.music.apple.com")}else{let t=this.current.externalLinks.find(e=>e.title.toLowerCase()===this.player.toLowerCase());return t==null?"":t.source}}},methods:{changePlayer(t){this.player=t}}},T=h(ue,[["render",ae],["__scopeId","data-v-0508f4dc"]]);function de(t,e,r,_,n,o){const i=l("VideoSideSection"),u=l("a-affix");return s(),y(u,{"offset-top":n.top},{default:x(()=>[p(i,{current:r.current,transformYouTubeLink:r.transformYouTubeLink},null,8,["current","transformYouTubeLink"])]),_:1},8,["offset-top"])}const _e={name:"AppAffix",props:["current","transformYouTubeLink"],components:{VideoSideSection:T},data(){return{top:20}}},pe=h(_e,[["render",de]]),he={class:"review"},me={class:"review__right"},fe={class:"review__header"},ve={class:"review__title"},ye={class:"tags"},be={class:"tag"},ge={class:"text-field multiline"},we={class:"markdown__ru"},ke={class:"markdown__en"},xe={class:"review__left"};function Le(t,e,r,_,n,o){const i=l("Breadcrumb"),u=l("a-button"),d=l("RouterLink"),m=l("Toggle"),f=l("ReviewStar"),I=l("Affix"),R=l("VideoSideSection");return s(),c(v,null,[p(i,{class:"breadcrumb",arr:n.breadcrumbArr,title:n.current.title},null,8,["arr","title"]),a("main",he,[a("div",me,[a("div",fe,[a("h1",ve,w(n.current.title)+" ("+w(n.current.year)+")",1),a("ul",ye,[(s(!0),c(v,null,k(n.current.tags,L=>(s(),c("li",be,[p(d,{to:`/tags/${L.toLowerCase()}`},{default:x(()=>[p(u,null,{default:x(()=>[$(w(L.toLowerCase()),1)]),_:2},1024)]),_:2},1032,["to"])]))),256))]),n.filesLoaded==2?(s(),y(m,{key:0,class:"toggle",toggleValue:o.toggleValue,checked:n.en},null,8,["toggleValue","checked"])):j("",!0),(s(!0),c(v,null,k(n.current.rating,L=>b((s(),y(f,null,null,512)),[[g,!isNaN(n.current.rating)]])),256))]),a("div",ge,[b(a("div",we,null,512),[[g,!n.en]]),b(a("div",ke,null,512),[[g,n.en]])])]),a("div",xe,[n.isAffix?(s(),y(I,{key:0,current:n.current},null,8,["current"])):(s(),y(R,{key:1,current:n.current},null,8,["current"]))])])],64)}const Se={name:"AppVideo",components:{ReviewStar:Q,Toggle:J,Affix:pe,VideoSideSection:T,Breadcrumb:E},inject:["json"],data(){return{arr:this.json.filter(t=>t.type=="review"),current:null,en:!1,isLargeScreen:S("(min-width: 1024px)"),textEn:"",textRu:"",filesLoaded:0,isAffix:S("(min-width: 1300px)"),breadcrumbArr:[{title:"Home",link:"/"}]}},computed:{calculateWidth(){return this.isLargeScreen?640:400}},methods:{toggleValue(t){this.en=t},updateScreen(){this.isLargeScreen=S("(min-width: 1024px)")},addBreadcrumbLink(t){let e={};t=="review"?(e.title="Reviews",e.link="/videos",this.breadcrumbArr.push(e)):t=="weekly"?(e.title="Weekly Track Roundups",e.link="/wtr",this.breadcrumbArr.push(e)):t=="YUNOREVIEW"?(e.title="YUNOREVIEWs",e.link="/ynr",this.breadcrumbArr.push(e)):t=="TRACK REVIEW"?(e.title="TRACK REVIEW",e.link="/trkrvws",this.breadcrumbArr.push(e)):t=="list-week"?(e.title="list week",e.link="/list-week",this.breadcrumbArr.push(e)):t=="podcast"?(e.title="podcasts",e.link="/podcasts",this.breadcrumbArr.push(e)):t=="vinyl"?(e.title="vinyls",e.link="/vinyls",this.breadcrumbArr.push(e)):t=="other"&&(e.title="other",e.link="/other",this.breadcrumbArr.push(e))},stringToHTML(t){let e=document.createElement("div");return e.innerHTML=t,e}},async created(){this.current=this.json.filter(r=>r.id==this.$route.params.video)[0],this.addBreadcrumbLink(this.current.type),V(`${this.$route.params.video}-en`).then(r=>{r!==""?(this.textEn=r,this.en=!0,this.filesLoaded++,document.querySelector(".markdown__en").innerHTML=this.textEn):M(this.current.video).then(n=>{n!==void 0&&(this.textEn=n,this.en=!0,this.filesLoaded++,document.querySelector(".markdown__en").innerHTML=this.textEn)}).catch(n=>{console.log(n)})}).catch(r=>{console.log(r)}),V(`${this.$route.params.video}-ru`).then(r=>{if(r!=="")this.textRu=r,this.en=!1,this.filesLoaded++,document.querySelector(".markdown__ru").innerHTML=this.textRu;else throw new Error("Not found")}).catch(r=>{console.log(r)})}},Ve=h(Se,[["render",Le],["__scopeId","data-v-f7c7c8a4"]]);function Ae(t,e,r,_,n,o){const i=l("AppHeader"),u=l("AppVideo"),d=l("a-back-top");return s(),c(v,null,[p(i),p(u),p(d)],64)}const $e={components:{AppHeader:C,AppVideo:Ve}},Ee=h($e,[["render",Ae]]);export{Ee as default};
